(this["webpackJsonpminstagram-front"]=this["webpackJsonpminstagram-front"]||[]).push([[0],{132:function(e,t,n){},134:function(e,t,n){},135:function(e,t,n){},162:function(e,t,n){},170:function(e,t,n){"use strict";n.r(t);var c,a,s,i,o,r,j,l,b,d,u,O,m,h,f,x,p,g,v,w,C,y,A,S,k,N,E,M,T,F,P,L,z,R,_,U,D,I,W,G,H,q,B,V,K,Y,Q,J,Z,X,$,ee,te,ne,ce,ae,se,ie,oe,re,je,le,be,de,ue,Oe,me,he,fe,xe,pe,ge,ve,we,Ce,ye,Ae,Se,ke,Ne,Ee,Me,Te,Fe,Pe,Le,ze,Re,_e,Ue,De=n(0),Ie=n.n(De),We=n(51),Ge=n.n(We),He=(n(132),n(19)),qe=n.n(He),Be=n(32),Ve=n(5),Ke=(n(134),n(9)),Ye=n(13),Qe=n(3),Je=(n(135),"http://www.dogmadevs.com:9000"),Ze=n(12),Xe=n.n(Ze),$e=n(75),et=n.n($e),tt=Object(De.createContext)({isAuthenticated:!1,setIsAuthenticated:function(){},user:{_id:"",name:"",avatar:"",email:""},setUser:function(){}}),nt=tt,ct=n(211),at=n(4),st=n(20),it=n(1),ot=st.a.input(c||(c=Object(Qe.a)(["\n  height: 2.5em;\n  width: 20em;\n  font-size: 1em;\n  margin-bottom: 1em;\n  padding-left: 0.4em;\n  border-radius: 3px;\n  border: ",";\n"])),(function(e){return e.wrong?"2px solid red":"0.5px solid gainsboro"})),rt=st.a.button(a||(a=Object(Qe.a)(["\n  margin-top: 0.5em;\n  text-align: center;\n  font-size: 1em;\n  width: 20.6em;\n  height: 2.2em;\n  border: none;\n  background-color: dodgerblue;\n  border-radius: 4px;\n  color: white;\n  font-weight: 580;\n  margin-bottom: 2em;\n"]))),jt=Object(at.a)(s||(s=Object(Qe.a)(["\n  color: dodgerblue;\n  font-weight: 700;\n"]))),lt=Object(at.a)(i||(i=Object(Qe.a)(["\n  margin-top: 1.4em;\n"]))),bt=function(){var e=Object(De.useState)({email:"",password:"",name:""}),t=Object(Ve.a)(e,2),n=t[0],c=t[1],a=Object(De.useState)(!1),s=Object(Ve.a)(a,2),i=s[0],r=s[1],j=Object(De.useState)(""),l=Object(Ve.a)(j,2),b=l[0],d=l[1],u=Object(De.useContext)(nt),O=u.setIsAuthenticated,m=u.setUser,h=Object(De.useState)({email:!1,name:!1,password:!1}),f=Object(Ve.a)(h,2),x=f[0],p=f[1];Object(De.useLayoutEffect)((function(){var e=localStorage.getItem("user");e&&et.a.get("credential")&&(O(!0),m(JSON.parse(e)))}),[]);var g=function(e){var t,n=e.email,c=e.name,a=e.password;return n.includes("@")&&n.includes(".")?c.includes("dog")?(t="\uacc4\uc815 \uc774\ub984\uc5d0 'dog'\uc744 \ud3ec\ud568\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.",p(Object(Ye.a)(Object(Ye.a)({},x),{},{name:!0}))):a.length<8&&(t="\ube44\ubc00\ubc88\ud638\ub294 8\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4.",p(Object(Ye.a)(Object(Ye.a)({},x),{},{password:!0}))):(t="\uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc774\uba54\uc77c \uc785\ub2c8\ub2e4.",p(Object(Ye.a)(Object(Ye.a)({},x),{},{email:!0}))),t?{isValid:!1,msg:t}:{isValid:!0,msg:"validate successful"}},v=function(e){return function(t){d(""),p(Object(Ye.a)(Object(Ye.a)({},x),{},Object(Ke.a)({},e,!1))),c(Object(Ye.a)(Object(Ye.a)({},n),{},Object(Ke.a)({},e,t.target.value)))}},w=function(){var e=Object(Be.a)(qe.a.mark((function e(t){var a,s,o,j,l;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i){e.next=18;break}return e.next=4,Xe.a.post(Je+"/users/login",{email:n.email,password:n.password},{withCredentials:!0}).catch((function(e){return e.response}));case 4:if(a=e.sent,console.log(a),200!==(null===a||void 0===a?void 0:a.status)){e.next=13;break}return localStorage.setItem("user",JSON.stringify(a.data)),O(!0),m(a.data),e.abrupt("return");case 13:s="",404===a.status?(s="\uc874\uc7ac\ud558\uc9c0 \uc54a\ub294 \uacc4\uc815\uc785\ub2c8\ub2e4.",p(Object(Ye.a)(Object(Ye.a)({},x),{},{email:!0}))):400===a.status?s="\uc798\ubabb\ub41c \uc694\uccad\uc785\ub2c8\ub2e4.":401===a.status&&(s="\uc798\ubabb\ub41c \ube44\ubc00\ubc88\ud638\uc785\ub2c8\ub2e4.",p(Object(Ye.a)(Object(Ye.a)({},x),{},{password:!0}))),d("\ub85c\uadf8\uc778 \uc2e4\ud328 : "+s);case 16:e.next=29;break;case 18:if(!(o=g(n)).isValid){e.next=26;break}return e.next=22,Xe.a.post(Je+"/users/register",n).catch((function(e){return console.log(e),e.response}));case 22:200===(null===(j=e.sent)||void 0===j?void 0:j.status)?(d(""),r(!1)):(400===j.status?l="\uc798\ubabb\ub41c \uc694\uccad\uc785\ub2c8\ub2e4.":409===j.status&&(l="\uc774\ubbf8 \ub4f1\ub85d\ub41c \uacc4\uc815 \ub610\ub294 \uc774\ub984\uc785\ub2c8\ub2e4.",p(Object(Ye.a)(Object(Ye.a)({},x),{},{email:!0,name:!0}))),d("\uac00\uc785 \uc2e4\ud328 : "+l)),e.next=28;break;case 26:return d(o.msg),e.abrupt("return");case 28:c(Object(Ye.a)(Object(Ye.a)({},n),{},{password:"",name:""}));case 29:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(it.jsxs)("div",{id:"login",children:[Object(it.jsx)("p",{id:"loginTitle",children:"Minstagram"}),Object(it.jsxs)("form",{id:"loginForm",onSubmit:w,children:[Object(it.jsx)(ot,{type:"text",value:n.email,onChange:v("email"),placeholder:"\uc774\uba54\uc77c",wrong:x.email}),Object(it.jsx)("br",{}),i&&Object(it.jsxs)("span",{children:[Object(it.jsx)(ot,{type:"text",value:n.name,onChange:v("name"),placeholder:"\uacc4\uc815 \uc774\ub984",wrong:x.name}),Object(it.jsx)("br",{})]}),Object(it.jsx)(ot,{type:"password",value:n.password,onChange:v("password"),placeholder:"\ube44\ubc00\ubc88\ud638",wrong:x.password}),Object(it.jsx)("br",{}),Object(it.jsx)("div",{className:Object(at.a)(o||(o=Object(Qe.a)(["font-weight: bold; color: red;"]))),children:b}),Object(it.jsx)(rt,{children:i?"\uac00\uc785":"\ub85c\uadf8\uc778"}),!i&&Object(it.jsxs)(it.Fragment,{children:[Object(it.jsx)(ct.a,{}),Object(it.jsxs)("div",{className:lt,children:["\uacc4\uc815\uc774 \uc5c6\uc73c\uc2e0\uac00\uc694?",Object(it.jsx)("a",{onClick:function(){r(!0)},className:jt,children:"\uac00\uc785\ud558\uae30"})]})]})]})]})},dt=n(53),ut=n(31),Ot=function(e){var t,n,c,a=Object(at.a)(r||(r=Object(Qe.a)(["\n    display: flex;\n    align-items: center;\n  "]))),s=Object(at.a)(j||(j=Object(Qe.a)(["\n    width: ",";\n    height: ",";\n    object-fit: cover;\n    border-radius: 50%;\n    border: 1px solid gray;\n  "])),null!==(t=e.imageWidth)&&void 0!==t?t:"2.5em",null!==(n=e.imageWidth)&&void 0!==n?n:"2.5em"),i=Object(at.a)(l||(l=Object(Qe.a)(["\n    margin-left: 0.7em;\n    font-size: ",";\n    font-weight: 580;\n  "])),null!==(c=e.nameFontSize)&&void 0!==c?c:"15px"),o=e.user,b=e.onClick;return o?Object(it.jsx)(ut.b,{to:"/".concat(o.name),children:Object(it.jsxs)("span",{className:a,onClick:b,children:[(void 0===e.avatarShown||e.avatarShown)&&o.avatar.length>0?Object(it.jsx)("img",{src:Je+"/images/"+o.avatar,className:s}):Object(it.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOIAAADfCAMAAADcKv+WAAAAMFBMVEWhtunL1vLM1/KftOm1xe3M1vKit+m/ze+kuOrH0/Gqveuyw+3D0PC6ye6uwOyftOY8UPyPAAADcklEQVR4nO3c3XKrIBSGYRGN4l/v/2632k6mSdPAslmB5X6fo0wPWr5ZCEKgVQUAAAAAAAAAAAAAAAAAAAAAAAAAkPO+6odhWYbhsn48H18t8+RcvXOhG/uTpfTDvKZr3dWacxqr86T0w7RW7t76oyZ3y17E992DgJ8p3XKGQvrF/RJwD9nlbt/f+flJwC1j6HM38Y989zzh1lkH053VT7GEW0jLGeM1/DTkbuhhvklL2IZL7qYeNaQl3MZVq101MeCWcTSZMTZd3Mrd2kN6ScJ6NlhGWRFda3DEuYgSuroxV8bUCeMq5G6xmJ/aeKybMpqb/3thQoMDziLsp66djEUUjqc7Y2Nq0hLjlrWH0QdxEesld6OFDkQcc7dZ5iJOaG7y788f8UgVjXXU/+BZ9EH6dmNuRE3dmPoe0diGqnih4ewt/JO3pq5FtPaOKh9Src0ZBx5Ga49iJV5N2eunaxmFRTQ2K26EY6q9rZuNrIj2+ulaxjG9jG2wmFC08re24r9KXlGpzokfH3q/u/KJE4fuhKEaMfFxrHVHU92ISTOHekLdiAl1rCfd/VP1iJGTRds+v3IDtDvqyl+ezB2105/y9SM+KWTdzpc3TPlviLhqwo+Tfm1dd5bPFN3z1dJtZ22/9qy2j6E526HbNeXQdPu5YhemeelPeXa68l+x/DnjAXjuPfNiTu94u8mMiCegv5j65B97x5/WjrhfdlvGsfnFuCyD9suOYkTvh7ELddz2yqp4Q0wr4vrS3bn65rLbk5X/fg9ObeGhEtH3888FYiymM7R8XAO28q/Bt5STlYtws7CA30MGA5WM7bhFQ87Fn9mUH0a5D1n2TTjfh78mdGUfbPBL2iQRzVjs1VTJd6aRjFPuLI8dOTD1a8Yir/u9roZ7xgLrmPp1aXrG4sYc8Zm3aMbirm3Kz59GM5Z1TuXA8dOEjCWdinvtUHONWNTjqBDQFdVVj1yQSlPM7Ci6NSxRzIU/lbHmK2MhZVQrYjFl1HsSN0WUUXh8WKaMw8Yvfjm9i1jC3Kg42OwZS3jF0QxYRk99+RLjLmL+Bccr1/qP5Y8ov/otU8CxcfldTGHE7NcaD1waFkbMvquqPNqUMN6oTvx7xOyTv3rE/P9eRGVL47s6+12j0QVtuSMCAAAAAAAAAAAAAAAAAAAAAAAAAACpf/P2JHtXd325AAAAAElFTkSuQmCC",className:s}),(void 0===e.nameShown||e.nameShown)&&Object(it.jsx)("span",{className:i,children:o.name})]})}):Object(it.jsx)("span",{children:"hmm, something gone wrong."})},mt=n(21),ht=n(205),ft=n(203),xt=(Object(at.a)(b||(b=Object(Qe.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 400;\n  background-color: ",";\n  box-shadow: 24;\n  p: 4;\n  padding: 0;\n  border-radius: 0.5em;\n  outline: none;\n"])),"background.paper"),st.a.div(d||(d=Object(Qe.a)(["\n  font-weight: bold;\n  height: 2.5em;\n  position: relative;\n"])))),pt=st.a.div(u||(u=Object(Qe.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),gt=st.a.div(O||(O=Object(Qe.a)(["\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 100%;\n  transform: translate(-2.6em, -50%);\n"]))),vt=st.a.a(m||(m=Object(Qe.a)(["\n  position: absolute;\n  font-size: 0.9em;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: dodgerblue;\n"]))),wt=function(e){var t,n,c,a=Ie.a.useState(!1),s=Object(Ve.a)(a,2),i=s[0],o=s[1],r={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:null!==(t=e.width)&&void 0!==t?t:"28em",height:e.height,bgcolor:"background.paper",boxShadow:24,p:4,padding:0,borderRadius:"0.5em",outline:"none",maxHeight:"75%"},j=Object(at.a)(h||(h=Object(Qe.a)(["\n    height: ",";\n  "])),e.title?"calc(100% - 2.5em)":"100%");return Object(De.useEffect)((function(){o(e.open)}),[e.open]),Object(it.jsx)(it.Fragment,{children:Object(it.jsx)(ht.a,{open:i,onClose:function(){o(!1),e.onClose()},children:Object(it.jsxs)(ft.a,{sx:r,children:[e.title&&Object(it.jsxs)(it.Fragment,{children:[Object(it.jsxs)(xt,{children:[Object(it.jsx)(pt,{children:e.title}),Object(it.jsx)(gt,{children:Object(it.jsx)(vt,{onClick:null===(n=e.next)||void 0===n?void 0:n.onClick,children:null===(c=e.next)||void 0===c?void 0:c.text})})]}),Object(it.jsx)(ct.a,{})]}),Object(it.jsx)("div",{className:j,children:e.children})]})})})},Ct=n(212),yt=st.a.input(f||(f=Object(Qe.a)(["\n  display: none;\n"]))),At=st.a.div(x||(x=Object(Qe.a)(["\n  position: relative;\n  height: 100%;\n"]))),St=st.a.div(p||(p=Object(Qe.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]))),kt=Object(at.a)(g||(g=Object(Qe.a)(["\n  font-size: 1.2em;\n  margin-bottom: 1em;\n  font-weight: 100;\n"]))),Nt=Object(at.a)(v||(v=Object(Qe.a)(["\n  height: 100%;\n"]))),Et=Object(at.a)(w||(w=Object(Qe.a)(["\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n"]))),Mt=(Object(at.a)(C||(C=Object(Qe.a)(["\nfont-weight: bold;\n  margin-top: 1.2em;\n  padding: 0.5em;\n  font-size: 0.8em;\n  color: red;\n"]))),function(e){var t=Object(De.useState)(null),n=Object(Ve.a)(t,2),c=n[0],a=n[1],s=Object(De.useContext)(nt),i=s.user,o=s.setUser,r=s.setIsAuthenticated,j=Object(De.useState)(!1),l=Object(Ve.a)(j,2),b=l[0],d=l[1];return Object(it.jsxs)(wt,{open:e.open,onClose:function(){a(null),d(!1),e.onClose()},title:b?"\ud504\ub85c\ud544\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4":"\ud504\ub85c\ud544 \ubcc0\uacbd\ud558\uae30",next:c&&!b?{text:"\ubcc0\uacbd\ud558\uae30",onClick:function(){var e=new FormData;null!==c&&e.append("profile-picture",c[0]),Xe.a.post("".concat(Je,"/users/changeProfile"),e,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}}).then((function(e){o(Object(Ye.a)(Object(Ye.a)({},i),{},{avatar:e.data.avatar})),d(!0)})).catch((function(){r(!1)}))}}:void 0,width:"40em",height:"40em",children:[!b&&Object(it.jsxs)(At,{children:[!c&&Object(it.jsxs)(St,{children:[Object(it.jsx)("p",{className:kt,children:"\uc5c5\ub85c\ub4dc\ud560 \uc0ac\uc9c4\uc744 \uc120\ud0dd\ud558\uc138\uc694."}),Object(it.jsxs)("label",{htmlFor:"contained-button-file",children:[Object(it.jsx)(yt,{accept:"image/*",id:"contained-button-file",type:"file",onChange:function(e){return a(e.target.files)}}),Object(it.jsx)(Ct.a,{variant:"contained",component:"span",children:"\ucef4\ud4e8\ud130\uc5d0\uc11c \uc120\ud0dd"})]})]}),c&&c.length>0&&Object(it.jsx)("div",{className:Nt,children:Object(it.jsx)("img",{src:URL.createObjectURL(c[0]),className:Et})})]}),b&&Object(it.jsx)(At,{children:Object(it.jsx)(At,{children:Object(it.jsxs)(St,{children:[Object(it.jsx)("img",{src:"https://www.instagram.com/static/images/creation/30fpsCheckLoopsOnce.gif/10a8cbeb94ba.gif"}),Object(it.jsx)("p",{className:kt,children:"\ud504\ub85c\ud544\uc774 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4."})]})})})]})}),Tt=n(15),Ft=n.p+"static/media/before.d628f34a.svg",Pt=n.p+"static/media/next.ef7d1ff9.svg",Lt=Object(at.a)(y||(y=Object(Qe.a)(["\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 1.6em;\n  height: 1.6em;\n  opacity: 0.5;\n"]))),zt=Object(at.a)(A||(A=Object(Qe.a)(["\n  ","\n  left: 93%;\n"])),Lt),Rt=Object(at.a)(S||(S=Object(Qe.a)(["\n  ","\n  right: 93%;\n"])),Lt),_t=function(e){var t=Object(De.useState)(),n=Object(Ve.a)(t,2),c=n[0],a=n[1],s=Object(at.a)(k||(k=Object(Qe.a)(["\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    object-fit: cover;\n    position: relative;\n    height: ",";\n    ","\n  "])),(null===c||void 0===c?void 0:c.height)&&(null===c||void 0===c?void 0:c.height)>0&&e.sizeCalc?(null===c||void 0===c?void 0:c.height)+"px":"100%",e.containerStyle),i=Object(at.a)(N||(N=Object(Qe.a)(["\n    /* display: block;\n    max-height: 100%;\n    max-width: 100%; */\n    ","\n  "])),e.style),o=Object(De.useState)(0),r=Object(Ve.a)(o,2),j=r[0],l=r[1],b=Object(De.useRef)();return Object(it.jsxs)("div",{className:s,children:[j-1>=0&&Object(it.jsx)("img",{src:Ft,onClick:function(){j-1>=0&&l(j-1)},className:Rt}),Object(it.jsx)("img",{className:i,src:e.isURL?e.pictures[j]:"".concat(Je,"/images/").concat(e.pictures[j]),ref:b,onLoad:function(){c||0!==j||a({height:b.current.offsetHeight,width:b.current.offsetWidth})}}),j+1<=e.pictures.length-1&&Object(it.jsx)("img",{src:Pt,onClick:function(){j+1<=e.pictures.length-1&&l(j+1)},className:zt})]})},Ut=Object(at.a)(E||(E=Object(Qe.a)(["\n  position: relative;\n  height: 2.5em;\n  font-size: 0.85em;\n"]))),Dt=Object(at.a)(M||(M=Object(Qe.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n"]))),It=Object(at.a)(T||(T=Object(Qe.a)(["\n  color: red;\n  font-weight: bold;\n"]))),Wt=function(e){var t=Object(at.a)(F||(F=Object(Qe.a)(["\n    ","\n    ","\n    ","\n  "])),Dt,e.style,e.isRedBold?It:void 0);return Object(it.jsx)("div",{onClick:e.onClick,className:Ut,children:Object(it.jsx)("span",{className:t,children:e.children})})},Gt=function(e){Xe.a.delete("".concat(Je,"/posts/").concat(e),{withCredentials:!0})},Ht=Object(De.createContext)({deletePost:function(e){},editPost:function(e,t){}}),qt=Object(De.createContext)({post:{},setOpen:function(){}}),Bt=st.a.div(P||(P=Object(Qe.a)(["\n  height: 7em;\n  position: relative;\n"]))),Vt=st.a.span(L||(L=Object(Qe.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-weight: bold;\n"]))),Kt=function(e){var t=e.onClose,n=e.title,c=e.message;return Object(it.jsxs)(wt,{open:e.open,onClose:t,title:n,width:e.width,children:[c&&Object(it.jsxs)(it.Fragment,{children:[Object(it.jsx)(Bt,{children:Object(it.jsx)(Vt,{children:c})}),Object(it.jsx)(ct.a,{})]}),Object(it.jsx)("div",{className:"minstagram-modal-buttons",children:e.children})]})},Yt=Object(De.createContext)({setToastOpen:function(e){},toastMessage:"",setToastMessage:function(e){}}),Qt={fontWeight:"bold",color:"red"},Jt=function(e){var t=Object(De.useState)(e.open),n=Object(Ve.a)(t,2),c=n[0],a=n[1],s=Object(De.useContext)(qt).post,i=Object(De.useContext)(Ht).deletePost,o=Object(De.useContext)(Yt),r=o.setToastMessage,j=o.setToastOpen,l=e.isComment?"\ub313\uae00":"\uac8c\uc2dc\ubb3c";Object(De.useEffect)((function(){a(e.open)}),[e.open]);return Object(it.jsxs)(Kt,{open:c,onClose:function(){e.onClose(),a(!1)},message:"".concat(l,"\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc5b4\uc694?"),width:"24em",children:[Object(it.jsx)(Wt,{onClick:function(){var t;e.isComment?(t=e.commentIndex,Xe.a.delete("".concat(Je,"/posts/").concat(s._id,"/comment/").concat(t),{withCredentials:!0})):(Gt(s._id),void 0!=s.order&&i(s.order)),a(!1),e.onClose(),r("".concat(l,"\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),j(!0)},style:Qt,children:"\uc0ad\uc81c"}),Object(it.jsx)(ct.a,{}),Object(it.jsx)(Wt,{onClick:function(){a(!1),e.onClose()},children:"\ucde8\uc18c"})]})},Zt=function(e){var t=Object(De.useState)(e.open),n=Object(Ve.a)(t,2),c=n[0],a=n[1],s=Object(De.useState)(!1),i=Object(Ve.a)(s,2),o=i[0],r=i[1];Object(De.useEffect)((function(){a(e.open)}),[e.open]);return Object(it.jsxs)(Kt,{open:c,onClose:function(){a(!1),e.onClose()},width:e.width,children:[e.isAuthor&&Object(it.jsxs)(it.Fragment,{children:[Object(it.jsx)(Jt,{open:o,onClose:function(){r(!1),a(!1),e.onClose()},isComment:!0,commentIndex:e.index}),Object(it.jsx)(Wt,{onClick:function(){r(!0)},isRedBold:!0,children:"\uc0ad\uc81c"}),Object(it.jsx)(ct.a,{})]}),Object(it.jsx)(Wt,{children:"\uc544\ubb34\ud55c\ud14c\ub098 \ub728\ub294 \ud56d\ubaa9"}),Object(it.jsx)(ct.a,{}),Object(it.jsx)(Wt,{isRedBold:!0,children:"\uae30\ub2a5\uc740 \uc5c6\uc9c0\ub9cc \uac15\uc870"})]})},Xt=n.p+"static/media/option.bfbd5cca.svg",$t=function(e){var t=e.comment,n=e.index,c=e.style,a=Object(De.useState)(!1),s=Object(Ve.a)(a,2),i=s[0],o=s[1],r=Object(De.useContext)(nt).user,j=Object(at.a)(z||(z=Object(Qe.a)(["\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 0.2em;\n  "]))),l=Object(at.a)(R||(R=Object(Qe.a)(["\n    ","\n  "])),c),b=Object(at.a)(_||(_=Object(Qe.a)(["\n    display: inline-block;\n    font-weight: bold;\n    margin-right: 1em;\n    ","\n  "])),c);return Object(it.jsxs)("div",{className:j,children:[Object(it.jsx)(Zt,{open:i,onClose:function(){return o(!1)},index:t._id,width:"18em",isAuthor:t.author._id===r._id}),Object(it.jsxs)("div",{children:[Object(it.jsx)(ut.b,{to:"/".concat(t.author.name),children:Object(it.jsx)("span",{className:b,children:t.author.name})}),Object(it.jsx)("span",{className:l,children:t.content})]}),Object(it.jsx)("img",{src:Xt,className:Object(at.a)(U||(U=Object(Qe.a)(["width: 1em; height: 1em;"]))),onClick:function(){o(!0)}})]},n)},en=Object(at.a)(D||(D=Object(Qe.a)(["\n  color: darkgray;\n"]))),tn=function(e){var t=e.comments,n=Object(De.useState)(e.isExpanded),c=Object(Ve.a)(n,2),a=c[0],s=c[1],i=Object(De.useContext)(qt).setOpen,o=Object(at.a)(I||(I=Object(Qe.a)(["\n    text-align: left;\n    overflow-y: scroll;\n    margin-bottom: 0.5em;\n    padding-left: 0.7em;\n    padding-right: 0.7em;\n    font-size: 0.9em;\n    ","\n  "])),e.containerStyle);Object(De.useEffect)((function(){s(e.isExpanded)}),[e.isExpanded]);return Object(it.jsxs)("div",{className:o,children:[!a&&t.length>0&&t.slice(t.length-2,t.length).map((function(e,t){return Object(it.jsx)($t,{comment:e,index:t},t)})),a&&t.length>0&&t.map((function(e,t){return Object(it.jsx)($t,{comment:e,index:t},t)})),!a&&t.length>2&&Object(it.jsx)(it.Fragment,{children:Object(it.jsxs)("a",{onClick:function(){i(!0)},className:en,children:["\ub313\uae00 ",t.length,"\uac1c \ubaa8\ub450 \ubcf4\uae30"]})})]})},nn=function(e){var t=e.children.props.value,n=e.textMaxLength,c=(e.fontSize,e.width,e.height,st.a.div(W||(W=Object(Qe.a)(["\n    position: absolute;\n    font-size: 0.8em;\n    color: ",";\n    top: 105%;\n    left: 94%;\n    transform: translate(-90%, -90%);\n    \n  "])),t.length<=n?"gray":"red"));Object(De.useEffect)((function(){t.length>n&&e.setText(t.slice(0,n))}),[t]);var a=Object(at.a)(G||(G=Object(Qe.a)(["\n    width: 100%;\n    height: 12em;\n    position: relative;\n    ","\n  "])),e.style);return Object(it.jsxs)("div",{className:a,children:[e.children,Object(it.jsx)(c,{children:"".concat(t.length,"/").concat(n)})]})},cn=st.a.input(H||(H=Object(Qe.a)(["\n  display: none;\n"]))),an=st.a.div(q||(q=Object(Qe.a)(["\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n"]))),sn=Object(at.a)(B||(B=Object(Qe.a)(["\n  font-size: 1.2em;\n  margin-bottom: 1em;\n  font-weight: 100;\n"]))),on=Object(at.a)(V||(V=Object(Qe.a)(["\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n"]))),rn=Object(at.a)(K||(K=Object(Qe.a)(["\n  width: 35%;\n  border-left: 1px solid gainsboro;\n"]))),jn=Object(at.a)(Y||(Y=Object(Qe.a)(["\n  margin: 0;\n  padding: 7px;\n  border: 0;\n  outline: none;\n  resize: none;\n  font-family: inherit;\n  width: 95%;\n  height: 100%;\n"]))),ln=Object(at.a)(Q||(Q=Object(Qe.a)(["\n  font-weight: bold;\n  margin-top: 1.2em;\n  padding: 0.5em;\n  font-size: 0.8em;\n  color: red;\n"]))),bn=function(e){var t=e.originalPost,n=Object(De.useState)(t?t.pictures:null),c=Object(Ve.a)(n,2),a=c[0],s=c[1],i=Object(De.useState)(t?t.text:""),o=Object(Ve.a)(i,2),r=o[0],j=o[1],l=Object(De.useContext)(nt).user,b=Object(De.useState)(!1),d=Object(Ve.a)(b,2),u=d[0],O=d[1],m=Object(De.useState)(!1),h=Object(Ve.a)(m,2),f=h[0],x=h[1],p=Object(De.useState)(""),g=Object(Ve.a)(p,2),v=g[0],w=g[1],C=Object(De.useContext)(Ht).editPost,y=Object(De.useContext)(qt).post,A=Object(at.a)(J||(J=Object(Qe.a)(["\n    /* position: relative; */\n    height: ",";\n  "])),!a||f?"25em":"100%");Object(De.useEffect)((function(){v.length>0&&r.length>0&&w("")}),[r]);var S=function(){var e=Object(Be.a)(qe.a.mark((function e(){var n,c;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=8;break}if(n=new FormData,null!==a)for(c=0;c<a.length;c++)n.append("pictures",a[c]);return n.append("text",r),e.next=6,Xe.a.post("".concat(Je,"/posts/new"),n,{withCredentials:!0,headers:{"Content-Type":"multipart/form-data"}});case 6:e.next=11;break;case 8:return e.next=10,Xe.a.post("".concat(Je,"/posts/").concat(t._id,"/edit"),{text:r},{withCredentials:!0});case 10:void 0!=y.order&&C(y.order,r);case 11:O(!1),x(!0);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(it.jsxs)(wt,{open:e.open,onClose:function(){j(""),s(null),O(!1),x(!1),e.onClose()},title:f?t?"\uac8c\uc2dc\ubb3c\uc774 \uc218\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4":"\uac8c\uc2dc\ubb3c\uc774 \uacf5\uc720\ub418\uc5c8\uc2b5\ub2c8\ub2e4":t?"\uac8c\uc2dc\ubb3c \uc218\uc815\ud558\uae30":"\uc0c8 \uac8c\uc2dc\ubb3c \ub9cc\ub4e4\uae30",width:a&&!f?"75%":"40em",height:a&&!f?"80%":"40em",next:a&&!f?{text:t?"\uc218\uc815\ud558\uae30":"\uacf5\uc720\ud558\uae30",onClick:function(){r?(O(!0),S()):w("! \ubb38\uad6c\ub97c \uc785\ub825\ud574 \uc8fc\uc138\uc694.")}}:void 0,children:[!f&&u&&Object(it.jsx)("div",{className:A,children:Object(it.jsx)(an,{children:Object(it.jsx)("p",{className:sn,children:"\uc5c5\ub85c\ub4dc \uc911..."})})}),!f&&!u&&Object(it.jsxs)("div",{className:A,children:[!a&&Object(it.jsxs)(an,{children:[Object(it.jsx)("p",{className:sn,children:"\uc5c5\ub85c\ub4dc\ud560 \uc0ac\uc9c4\uc744 \uc120\ud0dd\ud558\uc138\uc694."}),Object(it.jsxs)("label",{htmlFor:"contained-button-file",children:[Object(it.jsx)(cn,{accept:"image/*",id:"contained-button-file",multiple:!0,type:"file",onChange:function(e){return s(e.target.files)}}),Object(it.jsx)(Ct.a,{variant:"contained",component:"span",children:"\ucef4\ud4e8\ud130\uc5d0\uc11c \uc120\ud0dd"})]})]}),a&&a.length>0&&Object(it.jsxs)("div",{className:on,children:[Object(it.jsx)(_t,{pictures:t?t.pictures:Array.from(a).map((function(e){return URL.createObjectURL(e)})),isURL:!t,containerStyle:Object(at.a)(Z||(Z=Object(Qe.a)(["width: 65%;"]))),style:Object(at.a)(X||(X=Object(Qe.a)(["max-width: 100%; max-height: 100%;"])))}),Object(it.jsxs)("div",{className:rn,children:[Object(it.jsx)("div",{style:{margin:"0.5em"},children:Object(it.jsx)(Ot,{user:l})}),Object(it.jsx)(nn,{style:Object(at.a)($||($=Object(Qe.a)(["\n                    height: 19em;\n                    font-size: 0.8em;\n                  "]))),textMaxLength:500,setText:j,children:Object(it.jsx)("textarea",{className:jn,placeholder:"\ubb38\uad6c \uc785\ub825...",value:r,onChange:function(e){return j(e.target.value)}})}),v&&Object(it.jsxs)(it.Fragment,{children:[Object(it.jsx)(ct.a,{}),Object(it.jsx)("div",{className:ln,children:v})]})]})]})]}),f&&!u&&Object(it.jsx)("div",{className:A,children:Object(it.jsxs)(an,{children:[Object(it.jsx)("img",{src:"https://www.instagram.com/static/images/creation/30fpsCheckLoopsOnce.gif/10a8cbeb94ba.gif"}),Object(it.jsx)("p",{className:sn,children:"\uac8c\uc2dc\ubb3c\uc774 \uacf5\uc720\ub418\uc5c8\uc2b5\ub2c8\ub2e4."})]})})]})},dn={fontWeight:"bold",color:"red"},un=function(e){var t=Ie.a.useState(!1),n=Object(Ve.a)(t,2),c=n[0],a=n[1],s=Object(De.useState)(!1),i=Object(Ve.a)(s,2),o=i[0],r=i[1],j=Object(De.useState)(!1),l=Object(Ve.a)(j,2),b=l[0],d=l[1],u=Object(De.useContext)(qt).post;return Object(De.useEffect)((function(){r(e.open)}),[e.open]),Object(it.jsxs)(Kt,{open:o,onClose:function(){r(!1),a(!1),e.onClose()},width:e.width,children:[Object(it.jsx)(Jt,{open:c,onClose:function(){r(!1),a(!1),e.onClose()}}),Object(it.jsx)(bn,{open:b,onClose:function(){d(!1),r(!1),e.onClose()},originalPost:u}),e.isAuthor&&Object(it.jsxs)(it.Fragment,{children:[Object(it.jsx)(Wt,{onClick:function(){return d(!0)},children:"\uc218\uc815"}),Object(it.jsx)(ct.a,{}),Object(it.jsx)(Wt,{onClick:function(){return a(!0)},style:dn,children:"\uc0ad\uc81c"}),Object(it.jsx)(ct.a,{})]}),Object(it.jsx)(ut.b,{to:"/posts/".concat(u._id),onClick:function(){return r(!1)},children:Object(it.jsx)(Wt,{children:"\uac8c\uc2dc\ubb3c\ub85c \uc774\ub3d9"})})]})},On=function(e){return Xe.a.get("".concat(Je,"/posts/").concat(e))},mn=Object(at.a)(ee||(ee=Object(Qe.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 2em;\n  padding: 0.3em;\n  /* padding: 0.5em; */\n"]))),hn=Object(at.a)(te||(te=Object(Qe.a)(["\n  margin-left: 0.4em;\n  width: 90%;\n  outline: none;\n  border: none;\n"]))),fn=Object(at.a)(ne||(ne=Object(Qe.a)(["\n  width: 2em;\n  margin-right: 0.4em;\n  color: dodgerblue;\n  font-weight: bold;\n"]))),xn=function(e){var t=Object(De.useState)(""),n=Object(Ve.a)(t,2),c=n[0],a=n[1];return Object(it.jsxs)("div",{className:mn,children:[Object(it.jsx)("input",{type:"text",onChange:function(e){a(e.target.value)},value:c,className:hn,placeholder:"\ub313\uae00 \ub2ec\uae30..."}),Object(it.jsx)("a",{onClick:function(){e.onSubmit(c),a("")},className:fn,children:"\uac8c\uc2dc"})]})},pn=Object(at.a)(ce||(ce=Object(Qe.a)(["\n  padding-top: 4em;\n"]))),gn=function(){return Object(it.jsxs)("div",{className:pn,children:[Object(it.jsx)("h2",{children:"\uc8c4\uc1a1\ud569\ub2c8\ub2e4. \ud398\uc774\uc9c0\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),Object(it.jsx)("h3",{children:"\ud074\ub9ad\ud558\uc2e0 \ub9c1\ud06c\uac00 \uc798\ubabb\ub418\uc5c8\uac70\ub098 \ud398\uc774\uc9c0\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}),Object(it.jsx)(ut.b,{to:"/",children:Object(it.jsx)("p",{children:"Minstagram\uc73c\ub85c \ub3cc\uc544\uac00\uae30."})})]})},vn=(Object(at.a)(ae||(ae=Object(Qe.a)(["\n  padding-bottom: 0.3em;\n  text-align: left;\n  font-size: 0.9em;\n"]))),Object(at.a)(se||(se=Object(Qe.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 0.6em;\n  padding-bottom: 0.6em;\n  padding-left: 0.7em;\n  padding-right: 0.7em;\n"])))),wn=dt.a.img(ie||(ie=Object(Qe.a)(["\n  width: 1em;\n  height: 1em;\n"]))),Cn=Object(at.a)(oe||(oe=Object(Qe.a)(["\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n"]))),yn=Object(at.a)(re||(re=Object(Qe.a)(["\n  border-right: 1px solid gainsboro;\n  width: 65%;\n  height: 100%;\n"]))),An=Object(at.a)(je||(je=Object(Qe.a)(["\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  width: 35%;\n  height: 100%;\n  /* flex-shrink: 2; */\n"]))),Sn=Object(at.a)(le||(le=Object(Qe.a)(["\n  display: flex;\n  flex-direction: column;\n  border-bottom: 1px solid gainsboro;\n  flex: 1;\n"]))),kn=Object(at.a)(be||(be=Object(Qe.a)(["\n  text-align: left;\n  margin-top: 0.7em;\n  padding-left: 0.7em;\n  padding-right: 0.7em;\n  margin-bottom: 0.2em;\n  font-size: 0.9em;\n"]))),Nn=Object(at.a)(de||(de=Object(Qe.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: 0;\n  overflow: auto;\n  flex: 1;\n"]))),En=Object(at.a)(ue||(ue=Object(Qe.a)(["\n  font-size: 0.9em;\n  /* margin-top: 1em; */\n"]))),Mn=Object(at.a)(Oe||(Oe=Object(Qe.a)(["\n  max-width: 100%;\n  max-height: 40em;\n"]))),Tn=function(e){var t=Object(mt.g)().postId,n=Object(De.useState)(),c=Object(Ve.a)(n,2),a=c[0],s=c[1],i=Ie.a.useState(!1),o=Object(Ve.a)(i,2),r=o[0],j=o[1],l=Object(De.useState)(!0),b=Object(Ve.a)(l,2),d=b[0],u=b[1],O=Object(De.useContext)(nt).user,m=Object(De.useState)(!!e.isModal),h=Object(Ve.a)(m,2),f=h[0],x=(h[1],Object(De.useState)(!1)),p=Object(Ve.a)(x,2),g=p[0],v=p[1],w=function(){return Object(it.jsx)(un,{open:r,onClose:function(){j(!1)},isAuthor:O._id===(null===a||void 0===a?void 0:a.author._id),width:"18em"})},C=Object(at.a)(me||(me=Object(Qe.a)(["\n    width: 55%;\n    max-width: 40em;\n    border: solid 0.1em gainsboro;\n    margin-bottom: 1em;\n    margin-left: auto;\n    margin-right: auto;\n    ","\n  "])),e.style),y=function(e){var t=a;Xe.a.post("".concat(Je,"/posts/").concat(t._id,"/comment"),{content:e,likes:[]},{withCredentials:!0}).then((function(e){s(Object(Ye.a)(Object(Ye.a)({},t),{},{comments:[].concat(Object(Tt.a)(t.comments),[e.data])}))})).catch((function(e){console.log(e)}))};return Object(De.useLayoutEffect)((function(){e.post?(s(e.post),u(!1)):On(t).then((function(e){s(e.data),u(!1)})).catch((function(e){console.log(e.response.status),400===e.response.status?s(void 0):console.log(e)}))}),[]),Object(De.useLayoutEffect)((function(){e.post&&s(e.post)}),[e.post]),Object(it.jsxs)(it.Fragment,{children:[a&&Object(it.jsxs)(qt.Provider,{value:{post:Object(Ye.a)(Object(Ye.a)({},a),{},{order:e.order}),setOpen:v},children:[Object(it.jsx)(Pn,{post:a,open:g,onClose:function(){return v(!1)}}),!d&&!a.isDeleted&&!e.isModal&&Object(it.jsxs)("div",{className:C,children:[w(),Object(it.jsxs)("div",{className:vn,children:[Object(it.jsx)(Ot,{user:a.author}),Object(it.jsx)(wn,{src:Xt,onClick:function(){return j(!0)}})]}),Object(it.jsx)(ct.a,{}),Object(it.jsx)(_t,{pictures:a.pictures,style:Mn,containerStyle:Object(at.a)(he||(he=Object(Qe.a)(["min-height: 15em;"]))),sizeCalc:!0}),a.text&&Object(it.jsxs)("div",{className:kn,children:[Object(it.jsx)("b",{children:a.author.name})," \xa0 ",a.text]}),Object(it.jsx)(tn,{comments:a.comments,isExpanded:f,style:En}),Object(it.jsx)(ct.a,{}),Object(it.jsx)(xn,{onSubmit:y})]}),!d&&!a.isDeleted&&e.isModal&&Object(it.jsxs)("div",{className:Cn,children:[w(),Object(it.jsx)(_t,{pictures:a.pictures,containerStyle:yn,style:Object(at.a)(fe||(fe=Object(Qe.a)(["max-width: 100%; max-height: 100%;"])))}),Object(it.jsxs)("div",{className:An,children:[Object(it.jsxs)("div",{className:Sn,children:[Object(it.jsxs)("div",{className:vn,children:[Object(it.jsx)(Ot,{user:a.author}),Object(it.jsx)(wn,{src:Xt,onClick:function(){return j(!0)}})]}),Object(it.jsx)(ct.a,{}),a.text&&Object(it.jsxs)("div",{className:kn,children:[Object(it.jsx)("b",{children:a.author.name})," \xa0 ",a.text]}),Object(it.jsx)(tn,{comments:a.comments,isExpanded:f,style:En,containerStyle:Nn})]}),Object(it.jsxs)("div",{children:[Object(it.jsx)(ct.a,{}),Object(it.jsx)(xn,{onSubmit:y})]})]})]})]}),!a&&Object(it.jsx)(gn,{})]})},Fn=Object(at.a)(xe||(xe=Object(Qe.a)(["\n  margin-bottom: 0;\n  border: none;\n"]))),Pn=function(e){return Object(it.jsx)(wt,{open:e.open,onClose:e.onClose,width:"75%",height:"80%",children:Object(it.jsx)(Tn,{post:e.post,style:Fn,isModal:!0})})},Ln=dt.a.div(pe||(pe=Object(Qe.a)(["\n  padding-top: 4em;\n  justify-content: center;\n  max-width: 70%;\n  margin-left: auto;\n  margin-right: auto;\n  align-items: center;\n  "]))),zn=dt.a.div(ge||(ge=Object(Qe.a)(["\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  /* width: 100%;\n  height: 100%; */\n  max-width: 100%;\n  margin-top: 2em;\n"]))),Rn=dt.a.img(ve||(ve=Object(Qe.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  /* margin: 0.3em; */\n  /* margin-left: auto;\n  margin-right: auto; */\n  object-fit: cover;\n"]))),_n=Object(at.a)(we||(we=Object(Qe.a)(["\n  padding-top: 3em;\n  margin-bottom: 3em;\n  "]))),Un=Object(at.a)(Ce||(Ce=Object(Qe.a)(["\n  width: 24%;\n  padding-top: 25%; /* 1:1 Aspect Ratio */\n  position: relative;\n  margin: 0.5%;\n"]))),Dn=function(e){var t=Object(mt.g)().userNameParam,n=e.userName||t,c=Object(De.useState)([]),a=Object(Ve.a)(c,2),s=a[0],i=a[1],o=Object(De.useState)(),r=Object(Ve.a)(o,2),j=r[0],l=r[1],b=Object(De.useState)(!1),d=Object(Ve.a)(b,2),u=d[0],O=d[1],m=Object(De.useState)(!1),h=Object(Ve.a)(m,2),f=h[0],x=h[1],p=Object(De.useState)(0),g=Object(Ve.a)(p,2),v=g[0],w=g[1],C=Object(De.useState)(!0),y=Object(Ve.a)(C,2),A=y[0],S=y[1];Object(De.useLayoutEffect)((function(){function e(){return e=Object(Be.a)(qe.a.mark((function e(){var t,c;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Xe.a.get("".concat(Je,"/users/name"),{params:{name:n}}).catch((function(e){return e.response}));case 2:if(t=e.sent,console.log(t),404!==t.status){e.next=6;break}return e.abrupt("return");case 6:return l(t.data),e.next=9,k(t.data._id);case 9:c=e.sent,S(!1),i(c);case 12:case"end":return e.stop()}}),e)}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[e.userName,t]);var k=function(){var e=Object(Be.a)(qe.a.mark((function e(t){var n;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw Error("no id given");case 2:return e.next=4,Xe.a.get("".concat(Je,"/users/").concat(t,"/posts"),{withCredentials:!0});case 4:return n=e.sent,e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(it.jsxs)(it.Fragment,{children:[!j&&Object(it.jsx)(gn,{}),!A&&j&&Object(it.jsxs)(Ln,{children:[Object(it.jsx)(Mt,{open:u,onClose:function(){return O(!1)}}),Object(it.jsx)(Pn,{open:f,onClose:function(){return x(!1)},post:s[v]}),Object(it.jsx)("div",{className:_n,children:Object(it.jsx)("div",{onClick:function(){return O(!0)},children:Object(it.jsx)(Ot,{user:j,imageWidth:"7em",nameFontSize:"2.5em"})})}),Object(it.jsx)(ct.a,{}),Object(it.jsxs)(zn,{children:[0===(null===s||void 0===s?void 0:s.length)&&Object(it.jsx)("span",{className:Object(at.a)(ye||(ye=Object(Qe.a)(["font-size: 1.3em;"]))),children:"\uc544\uc9c1 \uc544\ubb34 \uac83\ub3c4 \uc62c\ub9ac\uc9c0 \uc54a\uc558\uc5b4\uc694."}),(null===s||void 0===s?void 0:s.length)>0&&s.map((function(e,t){return Object(it.jsx)("div",{className:Un,children:Object(it.jsx)(Rn,{src:Je+"/images/"+e.pictures[0],onClick:function(){w(t),x(!0)}})},e._id)}))]})]})]})},In=n.p+"static/media/heart.6837acf8.svg",Wn=n.p+"static/media/newpost.ad666e89.svg",Gn=(n(162),dt.a.img(Ae||(Ae=Object(Qe.a)(["\n  width: 1.5em;\n  height: 1.5em;\n  margin-right: 1em;\n"])))),Hn=Object(at.a)(Se||(Se=Object(Qe.a)(["\n  margin-right: 0.5em;\n"]))),qn=function(){var e=Object(De.useContext)(nt),t=e.user,n=e.setIsAuthenticated,c=e.setUser,a=Object(De.useState)(!1),s=Object(Ve.a)(a,2),i=s[0],o=s[1];Object(mt.f)();return Object(it.jsxs)("div",{id:"TopBar",children:[Object(it.jsx)(bn,{open:i,onClose:function(){o(!1)}}),Object(it.jsx)(ut.b,{to:"/",children:Object(it.jsx)("span",{className:"logo",children:"Minstagram"})}),Object(it.jsxs)("span",{id:"TopBarRightSide",children:[Object(it.jsxs)("span",{id:"TopBarButtons",children:[Object(it.jsx)(Gn,{src:In,onClick:function(){Xe.a.get("".concat(Je,"/users/logout"),{withCredentials:!0}),n(!1),c({_id:"",name:"",avatar:"",email:""})}}),Object(it.jsx)(Gn,{src:Wn,onClick:function(){o(!0)}})]}),Object(it.jsx)("span",{className:Hn,children:Object(it.jsx)(Ot,{nameShown:!1,user:t,imageWidth:"1.5em"})})]})]})},Bn=n(207),Vn=n(116),Kn=n.n(Vn),Yn=n(115),Qn=n.n(Yn),Jn=Object(at.a)(ke||(ke=Object(Qe.a)(["\n  position: fixed;\n  bottom: 50px;\n  right: 50px;\n"]))),Zn=Object(at.a)(Ne||(Ne=Object(Qe.a)(["\n  align-items: center;\n  flex-direction: column;\n  overflow-y: scroll;\n  height: calc(100% - 4em);\n  justify-content: center;\n  padding-top: 4em;\n"]))),Xn=function(e){var t,n=Object(De.useState)(null!==(t=e.posts)&&void 0!==t?t:[]),c=Object(Ve.a)(n,2),a=c[0],s=c[1],i=Object(De.useState)(!1),o=Object(Ve.a)(i,2),r=o[0],j=o[1],l=Object(De.useState)(""),b=Object(Ve.a)(l,2),d=b[0],u=b[1],O=Object(De.useState)(!1),m=Object(Ve.a)(O,2),h=m[0],f=m[1],x=Object(De.useState)(),p=Object(Ve.a)(x,2),g=p[0],v=p[1],w=Object(De.useState)(1),C=Object(Ve.a)(w,2),y=C[0],A=C[1],S=Object(De.useState)(!0),k=Object(Ve.a)(S,2),N=k[0],E=k[1],M=Object(De.useRef)();Object(De.useEffect)((function(){if(!e.posts&&N){var t=function(){var e=Object(Be.a)(qe.a.mark((function e(){var t;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe.a.get("".concat(Je,"/posts/"),{params:{pageSize:5,page:y}});case 3:if((t=e.sent).data.data){e.next=7;break}return E(!1),e.abrupt("return");case 7:s((function(e){return[].concat(Object(Tt.a)(e),Object(Tt.a)(t.data.data))})),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();t()}}),[y,N]);var T=Object(De.useCallback)((function(e){var t=e.target;t.scrollHeight-t.scrollTop===t.clientHeight&&A((function(e){return e+1}))}),[]);Object(De.useEffect)((function(){var e=Qn.a.throttle(T,300);return M.current&&M.current.addEventListener("scroll",e),function(){M.current&&M.current.removeEventListener("scroll",e)}}),[T,M.current]);return Object(it.jsxs)("div",{className:Zn,ref:M,children:[Object(it.jsx)(Yt.Provider,{value:{setToastOpen:j,toastMessage:d,setToastMessage:u},children:Object(it.jsxs)(Ht.Provider,{value:{deletePost:function(e){s((function(t){return[].concat(Object(Tt.a)(t.slice(0,e)),Object(Tt.a)(t.slice(e+1)))}))},editPost:function(e,t){s((function(n){return[].concat(Object(Tt.a)(n.slice(0,e)),[Object(Ye.a)(Object(Ye.a)({},n[e]),{},{text:t})],Object(Tt.a)(n.slice(e+1)))})),v(e)}},children:[!a&&Object(it.jsx)("div",{children:"\ud45c\uc2dc\ud560 \ud3ec\uc2a4\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),a&&function(){var e=a;return void 0!=g&&(e=[].concat(Object(Tt.a)(a.slice(0,g)),Object(Tt.a)(a.slice(g+1)))),h&&(e=Object(Tt.a)(e).reverse()),void 0!=g&&(e=[a[g]].concat(Object(Tt.a)(e))),e.map((function(t,n){return Object(it.jsx)(Tn,{post:t,order:h?e.length-n-1:n},t._id)}))}()]})}),Object(it.jsx)(Kn.a,{className:Jn,onClick:function(){f((function(e){return!e})),v(void 0)}}),Object(it.jsx)(Bn.a,{open:r,autoHideDuration:6e3,onClose:function(e,t){"clickaway"!==t&&j(!1)},message:d})]})},$n=n(204),ec=n(208),tc=n(210),nc=n(121),cc=Object(at.a)(Ee||(Ee=Object(Qe.a)(["\n  display: flex;\n  flex-direction: row;\n"]))),ac=Object(at.a)(Me||(Me=Object(Qe.a)(["\n  max-height: 30em; \n  max-width: 60em;\n  overflow-y: scroll;\n  display: flex;\n  flex-direction: column;\n"]))),sc=Object(at.a)(Te||(Te=Object(Qe.a)(["\n  display: flex;\n  align-items: flex-end;\n"]))),ic=Object(at.a)(Fe||(Fe=Object(Qe.a)(["\n  /* "," */\n  /* flex-direction: column;\n  align-self: flex-end; */\n  margin-right: 0;\n  margin-left: auto;\n"])),sc),oc=Object(at.a)(Pe||(Pe=Object(Qe.a)(["\n  ","\n  flex-direction: row;\n  align-self: flex-start;\n"])),sc),rc=Object(at.a)(Le||(Le=Object(Qe.a)(["\n  height: 1em;\n  padding: 1em;\n  border-radius: 1.2em;\n  margin-top: 0.3em;\n  margin-bottom: 0.3em;\n"]))),jc=Object(at.a)(ze||(ze=Object(Qe.a)(["\n  ",";\n  background-color: blue;\n  position: relative;\n  text-align: right;\n"])),rc),lc=Object(at.a)(Re||(Re=Object(Qe.a)(["\n  ",";\n  background-color: red;\n  position: relative;\n  text-align: left;\n"])),rc),bc=Object(at.a)(_e||(_e=Object(Qe.a)(["\n  color: green;\n"]))),dc=function(e){var t=e.direct,n=Object(De.useContext)(nt).user;return Object(it.jsx)("div",{className:ac,children:t?t.messages.map((function(e){var t=e.author._id===n._id;return Object(it.jsx)("div",{className:cc,children:Object(it.jsxs)("div",{className:t?ic:oc,children:[!t&&Object(it.jsx)("div",{className:bc,children:Object(it.jsx)(Ot,{user:e.author,nameShown:!1,imageWidth:"2em"})}),Object(it.jsx)("div",{className:t?jc:lc,children:e.content})]})})})):"no content"})},uc=n(120),Oc=["messages"],mc=function(e){var t=e.users,n=Object(De.useState)(null),c=Object(Ve.a)(n,2),a=c[0],s=c[1],i=Object(De.useState)(),o=Object(Ve.a)(i,2),r=o[0],j=o[1],l=Object(De.useState)(""),b=Object(Ve.a)(l,2),d=b[0],u=b[1],O=Object(De.useContext)(nt).user,m=function(e){s((function(t){if(!t)return null;var n=t.messages,c=Object(nc.a)(t,Oc);return Object(Ye.a)({messages:[].concat(Object(Tt.a)(n),[e])},c)}))};Object(De.useEffect)((function(){var e=function(){var e=Object(Be.a)(qe.a.mark((function e(){var n,c;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Xe.a.get("".concat(Je,"/directs/withUsers"),{params:{userId1:t[0]._id,userId2:t[1]._id}});case 3:n=e.sent,s(n.data[0]),e.next=20;break;case 7:return e.prev=7,e.t0=e.catch(0),console.log(e.t0),e.prev=10,e.next=13,Xe.a.post("".concat(Je,"/directs/newRoom"),t.map((function(e){return e._id})));case 13:c=e.sent,s({_id:c.data,members:t,messages:[],bookmarks:[0,0]}),e.next=20;break;case 17:e.prev=17,e.t1=e.catch(10),console.log(e.t1);case 20:case"end":return e.stop()}}),e,null,[[0,7],[10,17]])})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(De.useEffect)((function(){if(null!==a){var e=Object(uc.a)(Je);return e.on("connect",(function(){e.emit("join",a._id,et.a.get("credential"))})),e.on("messageEvent",m),j(e),function(){e.off("messageEvent",m),e.disconnect()}}}),[null===a||void 0===a?void 0:a.members]);return Object(it.jsxs)("div",{children:[a&&Object(it.jsx)(dc,{direct:a}),Object(it.jsxs)("div",{children:[Object(it.jsx)("input",{type:"text",value:d,onChange:function(e){return u(e.target.value)}}),Object(it.jsx)("input",{type:"button",value:"\ubcf4\ub0b4\uae30",onClick:function(){var e={author:O,content:d,timestamp:new Date};r&&r.emit("messageEvent",e),u("")}})]})]})},hc=Object(at.a)(Ue||(Ue=Object(Qe.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n"]))),fc=function(){var e=Object(De.useContext)(nt).user,t=Object(De.useState)([]),n=Object(Ve.a)(t,2),c=n[0],a=n[1],s=Object(De.useState)(),i=Object(Ve.a)(s,2),o=i[0],r=i[1],j=Object(De.useState)(""),l=Object(Ve.a)(j,2),b=l[0],d=l[1];Object(De.useLayoutEffect)((function(){Xe.a.get("".concat(Je,"/directs/withUsers"),{params:{userId1:e._id}}).then((function(e){a(e.data)}))}),[e]);var u=function(t){return function(){r(t),Xe.a.post("".concat(Je,"/directs/updateBookmark"),{roomId:c[t]._id,userId:e._id})}},O=function(){var t=Object(Be.a)(qe.a.mark((function t(){var n,c,s,i;return qe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe.a.get("".concat(Je,"/users/name"),{params:{name:b}});case 2:return n=t.sent,c=[e,n.data],t.next=6,Xe.a.post("".concat(Je,"/directs/newRoom"),{members:c});case 6:s=t.sent,i={_id:s.data,members:c,messages:[],bookmarks:[0,0]},a((function(e){return[].concat(Object(Tt.a)(e),[i])}));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(it.jsxs)("div",{className:hc,children:[Object(it.jsxs)("div",{children:[Object(it.jsx)($n.a,{children:c.map((function(t,n){return function(t,n){for(var c=t.members.filter((function(t){return t._id!==e._id}))[0],a=-1,s=0;s<t.members.length;s++)t.members[s]._id===e._id&&(a=s);var i=t.messages.length-t.bookmarks[a]-1;return Object(it.jsx)(ec.a,{children:Object(it.jsx)(tc.a,{primary:"".concat(c.name," ").concat(i,"\uac1c \uba54\uc2dc\uc9c0"),onClick:u(n)},n)})}(t,n)}))}),Object(it.jsx)("input",{type:"text",value:b,onChange:function(e){return d(e.target.value)}}),Object(it.jsx)("input",{type:"button",onClick:O,value:"\uc2dc\uc791"})]}),null!=o&&Object(it.jsx)(mc,{users:c[o].members})]})};var xc=function(){var e=Ie.a.useState(!1),t=Object(Ve.a)(e,2),n=t[0],c=t[1],a=Object(De.useState)({_id:"",name:"",avatar:"",email:""}),s=Object(Ve.a)(a,2),i=s[0],o=s[1];return Object(De.useEffect)((function(){Object(Be.a)(qe.a.mark((function e(){var t;return qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n&&i._id.length>0)){e.next=11;break}return e.prev=1,e.next=4,Xe.a.get("".concat(Je,"/users/").concat(i._id),{withCredentials:!0});case 4:t=e.sent,o(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})))()}),[n,i]),Object(it.jsx)(nt.Provider,{value:{isAuthenticated:n,setIsAuthenticated:c,user:i,setUser:o},children:Object(it.jsxs)("div",{className:"App",children:[!n&&Object(it.jsx)(bt,{}),n&&Object(it.jsxs)(it.Fragment,{children:[Object(it.jsx)(qn,{}),Object(it.jsx)("div",{id:"contentWrapper",children:Object(it.jsxs)(mt.c,{children:[Object(it.jsx)(mt.a,{exact:!0,path:"/directs",children:Object(it.jsx)(fc,{})}),Object(it.jsx)(mt.a,{exact:!0,path:"/login",children:Object(it.jsx)(bt,{})}),Object(it.jsx)(mt.a,{exact:!0,path:"/posts/:postId",children:Object(it.jsx)("div",{className:Zn,children:Object(it.jsx)(Tn,{})})}),Object(it.jsx)(mt.a,{path:"/:userNameParam",children:Object(it.jsx)(Dn,{})}),Object(it.jsx)(mt.a,{exact:!0,path:"/",children:Object(it.jsx)(Xn,{})})]})})]})]})})},pc=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,214)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};Ge.a.render(Object(it.jsx)(Ie.a.StrictMode,{children:Object(it.jsx)(ut.a,{children:Object(it.jsx)(xc,{})})}),document.getElementById("root")),pc()}},[[170,1,2]]]);
//# sourceMappingURL=main.56641b2e.chunk.js.map