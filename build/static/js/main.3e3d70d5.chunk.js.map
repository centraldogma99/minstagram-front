{"version":3,"sources":["configs/env.ts","context/authContext.ts","components/Login/Login.tsx","components/Profile.tsx","assets/defaultProfile.png","components/Modal/MinstagramModal.tsx","components/Modal/ChangeAvatarModal.tsx","assets/before.svg","assets/next.svg","components/Post/PicturesView.tsx","components/Modal/ModalMenuItem.tsx","modules/deletePost.ts","context/postContext.ts","components/Modal/MessageAndButtonsModal.tsx","context/ToastContext.ts","components/Modal/DeleteConfirmModal.tsx","components/Modal/CommentMenuModal.tsx","assets/option.svg","components/Post/Comment.tsx","components/Post/Comments.tsx","components/TextEditorWithLength/TextEditorWithLength.tsx","components/Modal/NewPostModal.tsx","components/Modal/PostMenuModal.tsx","modules/getPost.ts","components/Post/CommentForm.tsx","components/Post/Post.tsx","components/Modal/PostViewModal.tsx","components/Mypage/Mypage.tsx","components/TopBar/heart.svg","components/TopBar/newpost.svg","components/TopBar/TopBar.tsx","components/Post/Posts.tsx","components/Mypage/ChangeProfile.tsx","components/Post/EditPost.tsx","components/direct/DirectMessages.tsx","components/direct/Direct.tsx","components/direct/DirectList.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["backServer","AuthContext","createContext","isAuthenticated","setIsAuthenticated","user","_id","name","avatar","email","setUser","LoginInputText","styled","input","LoginButton","button","blueBold","css","willYouRegister","Login","useState","setEmail","password","setPassword","setName","isRegister","setIsRegister","statusText","setStatusText","useContext","useEffect","storageUser","localStorage","getItem","Cookies","get","JSON","parse","validate","userInfo","msg","includes","length","isValid","handleChange","setState","e","target","value","handleSubmit","a","preventDefault","axios","post","withCredentials","catch","response","res","status","setItem","stringify","data","validCheck","console","log","id","onSubmit","type","onChange","placeholder","className","Divider","onClick","Profile","props","profileStyle","AvatarImage","imageWidth","AvatarName","nameFontSize","to","undefined","avatarShown","src","nameShown","FormModalTitleContainer","div","FormModalTitle","FormModalNextButtonContainer","FormModalNextButton","MinstagramModal","React","open","setOpen","style","position","top","left","transform","width","height","bgcolor","boxShadow","p","padding","borderRadius","outline","maxHeight","FormModalChlidContainer","title","Modal","onClose","Box","sx","next","text","children","Input","NewPostContentContainer","NewPostContent","messageStyle","PicturesPreviewContainer","PicturePreview","ChangeAvatarModal","picture","setPicture","isUploaded","setIsUploaded","formData","FormData","append","headers","then","htmlFor","accept","files","Button","variant","component","URL","createObjectURL","navButton","nextButton","beforeButton","PicturesView","viewSize","setViewSize","PostPictureContainer","sizeCalc","containerStyle","PostPicture","current","setCurrent","view","useRef","before","isURL","pictures","ref","onLoad","offsetHeight","offsetWidth","childStyleBase","redBold","ModalMenuItem","childStyle","isRedBold","deletePost","delete","PostContext","editPost","MessageContainer","Message","span","MessageAndButtonsModal","message","ToastContext","setToastOpen","b","toastMessage","setToastMessage","s","redBoldStyle","fontWeight","color","DeleteConfirmModal","whatIsMe","isComment","index","commentIndex","deletePostAPI","CommentMenuModal","confirmModalOpen","setConfirmModalOpen","isAuthor","Comment","comment","commentContainer","CommentContent","CommentAuthorName","author","content","optionImg","moreComment","Comments","comments","isExpanded","setIsExpanded","slice","map","TextEditorWithLength","textMaxLength","TextLength","fontSize","setText","TextEditorWithLengthStyle","PicturesPreviewTextEditorContainer","PicturesPreviewTextEditor","ErrorText","NewPostModal","originalPost","setPictures","errorText","setErrorText","i","multiple","Array","from","margin","PostMenuModal","showDelete","setShowDelete","showEdit","setShowEdit","getPost","commentForm","commentInput","commentInputButton","CommentForm","SPostTopBar","PostTopBarButton","img","postModal","picturesViewContainer","postModalSide","postModalSideTop","SPostTextContainer","SCommentsStyle","SPostPictures","Post","postId","useParams","setPost","show","setShow","isInitialLoad","setIsInitialLoad","isCommentExpanded","setIsCommentExpanded","postMenuModal","PostStyle","handleCommentSubmit","likes","prev","rest","useLayoutEffect","postComeFirst","Provider","isDeleted","isModal","option","PostViewModal","ContentWrapperCentered","Posts","PostThumbnail","UserProfileContainer","thumbnailContainer","Mypage","userNameParam","userName","posts","setPosts","changeProfileOpen","setChangeProfileOpen","postViewOpen","setPostViewOpen","currentPost","setCurrentPost","isFetching","setIsFetching","params","getPosts","fetchPosts","Error","TopBarButton","TopBarProfile","TopBar","isNewPost","setIsNewPost","heart","newpost","toastOpen","newPost","pageSize","Snackbar","autoHideDuration","event","reason","ChangeProfile","isSuccess","setIsSuccess","err","EditPost","textProp","useLocation","state","history","useHistory","push","directMessageContainer","directMessages","directMessage","directMessageMe","directMessageFriend","directMessageContent","directMessageContentMe","directMessageContentFriend","directMessageAuthorAvatar","DirectMessages","direct","messages","isMe","Direct","users","setDirect","socket","setSocket","newMessage","userId1","userId2","members","bookmarks","io","on","emit","off","disconnect","timestamp","Date","DirectWrapper","DirectList","directs","setDirects","selected","setSelected","newDirectUser","setNewDirectUser","onClickDirect","roomId","userId","newDirect","opponent","friend","filter","member","meIndex","unreads","ListItem","ListItemText","primary","renderItems","App","exact","path","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3e3d70d5.chunk.js","sourcesContent":["export const backServer = \"http://http://ec2-3-131-119-122.us-east-2.compute.amazonaws.com:9000\"\n// http://ec2-3-131-119-122.us-east-2.compute.amazonaws.com","import { createContext } from \"react\";\nimport { IAuthContext } from \"../types/contextTypes\";\nimport { IUser } from \"../types/postTypes\";\n\nconst AuthContext = createContext<IAuthContext>({\n  isAuthenticated: false,\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  setIsAuthenticated: () => { },\n  user: { _id: \"\", name: \"\", avatar: \"\", email: \"\" },\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  setUser: () => { }\n});\n\nexport default AuthContext;","import React, { useEffect, useState, useContext } from \"react\";\nimport styled from \"styled-components\";\nimport \"./Login.css\"\nimport { backServer } from \"../../configs/env\";\nimport axios from \"axios\"\nimport Cookies from 'js-cookie';\nimport AuthContext from \"../../context/authContext\";\nimport { Divider } from \"@mui/material\";\nimport { css } from \"@emotion/css\";\n\n\nconst LoginInputText = styled.input`\n  height: 2.5em;\n  width: 20em;\n  font-size: 1em;\n  margin-bottom: 1em;\n  padding-left: 0.4em;\n  border-radius: 3px;\n  border: 0.5px solid gainsboro;\n`;\n\nconst LoginButton = styled.button`\n  margin-top: 0.5em;\n  text-align: center;\n  font-size: 1em;\n  width: 20.6em;\n  height: 2.2em;\n  border: none;\n  background-color: dodgerblue;\n  border-radius: 4px;\n  color: white;\n  font-weight: 580;\n  margin-bottom: 2em;\n`;\n\nconst blueBold = css`\n  color: dodgerblue;\n  font-weight: 700;\n`\n\nconst willYouRegister = css`\n  margin-top: 1.4em;\n`\n\nconst Login = () => {\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [name, setName] = useState<string>(\"\");\n  const [isRegister, setIsRegister] = useState<boolean>(false);\n  const [statusText, setStatusText] = useState<string>(\"\");\n  const { setIsAuthenticated, setUser } = useContext(AuthContext);\n\n  // 이미 로그인되어 있을 경우\n  // useEffect를 쓸 필요도 없을지도?\n  useEffect(() => {\n    const storageUser = localStorage.getItem('user')\n    if (storageUser && Cookies.get('credential')) {\n      setIsAuthenticated(true);\n      setUser(JSON.parse(storageUser))\n    }\n  }, [])\n\n  const validate = (userInfo: { email: string, name: string, password: string }) => {\n    let msg;\n    const { email, name, password } = userInfo;\n    if (!email.includes(\"@\") || !email.includes(\".\")) {\n      msg = \"유효하지 않은 이메일 입니다.\"\n    } else if (name.includes(\"dog\")) {\n      msg = \"계정 이름에 'dog'을 포함할 수 없습니다.\"\n    } else if (password.length < 8) {\n      msg = \"비밀번호는 8자 이상이어야 합니다.\"\n    }\n\n    if (msg) {\n      return {\n        isValid: false,\n        msg: msg\n      }\n    } else {\n      return {\n        isValid: true,\n        msg: \"validate successful\"\n      }\n    }\n  }\n\n  const handleChange = (setState: any) => {\n    return (e: any) => {\n      setState(e.target.value);\n    }\n  }\n\n  const handleSubmit = async (e: any) => {\n    e.preventDefault();\n    if (!isRegister) {\n      const res = await axios.post(backServer + \"/users/login\", {\n        email: email,\n        password: password\n      }, { withCredentials: true })\n        .catch((e: any) => e.response);\n\n      if (res?.status === 200) {\n        localStorage.setItem('user', JSON.stringify((res as any).data));\n        setIsAuthenticated(true);\n        setUser(res.data);\n        return;\n      } else {\n        let msg = \"\";\n        if (res.status === 404) {\n          msg = \"존재하지 않는 계정입니다.\"\n        } else if (res.status === 400) {\n          msg = \"잘못된 요청입니다.\"\n        } else if (res.status === 401) {\n          msg = \"잘못된 비밀번호입니다.\"\n        }\n        //FIXME 임시로 alert로 구현했음\n        setStatusText(\"로그인 실패 : \" + msg);\n        setEmail(\"\");\n        setPassword(\"\");\n      }\n    } else {\n      const userInfo = { email: email, name: name, password: password }\n      const validCheck = validate(userInfo);\n      if (validCheck.isValid) {\n        const res = await axios.post(backServer + \"/users/register\", userInfo)\n          .catch((e) => { console.log(e); return e.response });\n        if (res?.status === 200) {\n          setStatusText(\"\");\n        } else {\n          let msg;\n          if (res.status === 400) {\n            msg = \"잘못된 요청입니다.\"\n          } else if (res.status === 409) {\n            msg = \"이미 등록된 계정 또는 이름입니다.\"\n          }\n          setStatusText(\"가입 실패 : \" + msg)\n        }\n      } else {\n        setStatusText(validCheck.msg);\n        setPassword(\"\");\n        setName(\"\");\n        setEmail(\"\");\n        return;\n      }\n\n      // 다시 로그인하도록 한다\n      setPassword(\"\");\n      setName(\"\");\n      setEmail(\"\");\n\n      setIsRegister(false);\n    }\n  }\n\n  const handleRegister = () => {\n    setIsRegister(true);\n  }\n\n  return (\n    <div id=\"login\">\n      <p id=\"loginTitle\">\n        Minstagram\n      </p>\n      <form id=\"loginForm\" onSubmit={handleSubmit}>\n        <LoginInputText type=\"text\" value={email} onChange={handleChange(setEmail)} placeholder=\"이메일\" />\n        <br />\n        {isRegister && <span>\n          <LoginInputText type=\"text\" value={name} onChange={handleChange(setName)} placeholder=\"계정 이름\" />\n          <br />\n        </span>}\n        <LoginInputText type=\"password\" value={password} onChange={handleChange(setPassword)} placeholder=\"비밀번호\" />\n        <br />\n        <div className={css`font-weight: bold; color: red;`}>\n          {statusText}\n        </div>\n        <LoginButton>{isRegister ? '가입' : '로그인'}</LoginButton>\n\n\n        {!isRegister &&\n          <>\n            <Divider />\n            <div className={willYouRegister}>\n              계정이 없으신가요? <a onClick={handleRegister} className={blueBold}>가입하기</a>\n            </div>\n          </>\n        }\n      </form>\n    </div>\n  )\n}\n\nexport default Login;","import React from \"react\"\n// import useProfile from \"../hooks/useProfile\";\nimport { IUser } from \"../types/postTypes\";\nimport { backServer } from \"../configs/env\";\nimport { Link } from \"react-router-dom\";\nimport { css } from \"@emotion/css\"\n\nimport defaultProfileImage from \"../assets/defaultProfile.png\"\n\n// name is ambiguous: recommend AvatarWithName\nconst Profile = (props: { user: IUser, imageWidth?: string, nameFontSize?: string, onClick?: any, avatarShown?: boolean, nameShown?: boolean }) => {\n  const profileStyle = css`\n    display: flex;\n    align-items: center;\n  `\n\n  const AvatarImage = css`\n    width: ${props.imageWidth ?? \"2.5em\"};\n    height: ${props.imageWidth ?? \"2.5em\"};\n    object-fit: cover;\n    border-radius: 50%;\n    border: 1px solid gray;\n  `;\n\n  const AvatarName = css`\n    margin-left: 0.7em;\n    font-size: ${props.nameFontSize ?? \"15px\"};\n    font-weight: 580;\n  `\n  // const { image, name } = useProfile(props.user);\n  const { user, onClick } = props;\n  if (!user) return <span>hmm, something gone wrong.</span>;\n  return (\n    <Link to={`/${user.name}`}>\n      <span className={profileStyle} onClick={onClick}>\n        {(props.avatarShown === undefined || props.avatarShown) &&\n          user.avatar.length > 0 ?\n          <img src={backServer + \"/images/\" + user.avatar} className={AvatarImage} /> :\n          <img src={defaultProfileImage} className={AvatarImage} />\n        }\n        {(props.nameShown === undefined || props.nameShown) &&\n          <span className={AvatarName}>{user.name}</span>\n        }\n      </span>\n    </Link>\n  )\n}\n\nexport default Profile;","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOIAAADfCAMAAADcKv+WAAAAMFBMVEWhtunL1vLM1/KftOm1xe3M1vKit+m/ze+kuOrH0/Gqveuyw+3D0PC6ye6uwOyftOY8UPyPAAADcklEQVR4nO3c3XKrIBSGYRGN4l/v/2632k6mSdPAslmB5X6fo0wPWr5ZCEKgVQUAAAAAAAAAAAAAAAAAAAAAAAAAkPO+6odhWYbhsn48H18t8+RcvXOhG/uTpfTDvKZr3dWacxqr86T0w7RW7t76oyZ3y17E992DgJ8p3XKGQvrF/RJwD9nlbt/f+flJwC1j6HM38Y989zzh1lkH053VT7GEW0jLGeM1/DTkbuhhvklL2IZL7qYeNaQl3MZVq101MeCWcTSZMTZd3Mrd2kN6ScJ6NlhGWRFda3DEuYgSuroxV8bUCeMq5G6xmJ/aeKybMpqb/3thQoMDziLsp66djEUUjqc7Y2Nq0hLjlrWH0QdxEesld6OFDkQcc7dZ5iJOaG7y788f8UgVjXXU/+BZ9EH6dmNuRE3dmPoe0diGqnih4ewt/JO3pq5FtPaOKh9Src0ZBx5Ga49iJV5N2eunaxmFRTQ2K26EY6q9rZuNrIj2+ulaxjG9jG2wmFC08re24r9KXlGpzokfH3q/u/KJE4fuhKEaMfFxrHVHU92ISTOHekLdiAl1rCfd/VP1iJGTRds+v3IDtDvqyl+ezB2105/y9SM+KWTdzpc3TPlviLhqwo+Tfm1dd5bPFN3z1dJtZ22/9qy2j6E526HbNeXQdPu5YhemeelPeXa68l+x/DnjAXjuPfNiTu94u8mMiCegv5j65B97x5/WjrhfdlvGsfnFuCyD9suOYkTvh7ELddz2yqp4Q0wr4vrS3bn65rLbk5X/fg9ObeGhEtH3888FYiymM7R8XAO28q/Bt5STlYtws7CA30MGA5WM7bhFQ87Fn9mUH0a5D1n2TTjfh78mdGUfbPBL2iQRzVjs1VTJd6aRjFPuLI8dOTD1a8Yir/u9roZ7xgLrmPp1aXrG4sYc8Zm3aMbirm3Kz59GM5Z1TuXA8dOEjCWdinvtUHONWNTjqBDQFdVVj1yQSlPM7Ci6NSxRzIU/lbHmK2MhZVQrYjFl1HsSN0WUUXh8WKaMw8Yvfjm9i1jC3Kg42OwZS3jF0QxYRk99+RLjLmL+Bccr1/qP5Y8ov/otU8CxcfldTGHE7NcaD1waFkbMvquqPNqUMN6oTvx7xOyTv3rE/P9eRGVL47s6+12j0QVtuSMCAAAAAAAAAAAAAAAAAAAAAAAAAACpf/P2JHtXd325AAAAAElFTkSuQmCC\"","import { Divider, Modal, Box } from \"@mui/material\"\nimport React from \"react\"\nimport styled from \"@emotion/styled\"\nimport { useEffect } from \"react\"\nimport { css } from \"@emotion/css\"\n\nconst ModalStyle = css`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 400;\n  background-color: ${'background.paper'};\n  box-shadow: 24;\n  p: 4;\n  padding: 0;\n  border-radius: 0.5em;\n  outline: none;\n`\n\nconst FormModalTitleContainer = styled.div`\n  font-weight: bold;\n  height: 2.5em;\n  position: relative;\n`\n\nconst FormModalTitle = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`\n\nconst FormModalNextButtonContainer = styled.div`\n  position: absolute;\n  left: 50%;\n  top: 50%;\n  width: 100%;\n  transform: translate(-2.6em, -50%);\n`\n\nconst FormModalNextButton = styled.a`\n  position: absolute;\n  font-size: 0.9em;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  color: dodgerblue;\n`\n\nconst MinstagramModal = (props: {\n  open: boolean,\n  onClose: () => void,\n  title?: string,\n  width?: string,\n  height?: string,\n  next?: {\n    text: string,\n    onClick: () => void\n  }\n  children: any\n}) => {\n  const [open, setOpen] = React.useState<boolean>(false);\n  // const style = css`\n  //   position: absolute;\n  //   top: 50%;\n  //   left: 50%;\n  //   transform: translate(-50%, -50%);\n  //   width: ${props.width ?? '28em'};\n  //   background-color: 'background.color';\n  //   box-shadow: 24;\n  //   padding: 0;\n  //   border-radius: 0.5em;\n  //   outline: none;\n  //   height: 80%;\n  // `\n  const style = {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    transform: 'translate(-50%, -50%)',\n    width: props.width ?? '28em',\n    height: props.height,\n    bgcolor: 'background.paper',\n    boxShadow: 24,\n    p: 4,\n    padding: 0,\n    borderRadius: \"0.5em\",\n    outline: 'none',\n    maxHeight: '75%'\n  }\n\n  const FormModalChlidContainer = css`\n    height: ${props.title ? \"calc(100% - 2.5em)\" : \"100%\"};\n  `;\n\n  useEffect(() => {\n    setOpen(props.open)\n  }, [props.open])\n\n  return (<>\n    <Modal open={open} onClose={() => {\n      setOpen(false);\n      props.onClose()\n    }}>\n      <Box sx={style as any}>\n        {props.title && <>\n          <FormModalTitleContainer>\n            <FormModalTitle>\n              {props.title}\n            </FormModalTitle>\n            <FormModalNextButtonContainer>\n              <FormModalNextButton onClick={props.next?.onClick} >\n                {props.next?.text}\n              </FormModalNextButton>\n            </FormModalNextButtonContainer>\n          </FormModalTitleContainer>\n          <Divider />\n        </>}\n\n        <div className={FormModalChlidContainer}>\n          {props.children}\n        </div>\n      </Box>\n    </Modal>\n  </>)\n}\n\nexport default MinstagramModal;","import React, { useState } from 'react'\nimport MinstagramModal from './MinstagramModal';\nimport { Button } from '@mui/material';\nimport styled from \"@emotion/styled\"\nimport { css } from \"@emotion/css\"\nimport { useContext } from 'react';\nimport AuthContext from '../../context/authContext';\nimport { backServer } from '../../configs/env';\nimport axios from 'axios';\nimport { IUser } from '../../types/postTypes';\n\nconst Input = styled.input`\n  display: none;\n`\n\nconst NewPostContentContainer = styled.div`\n  position: relative;\n  height: 25em;\n`\n\nconst NewPostContent = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n`\n\nconst messageStyle = css`\n  font-size: 1.2em;\n  margin-bottom: 1em;\n  font-weight: 100;\n`\n\nconst PicturesPreviewContainer = css`\n  height: 100%;\n`\n\nconst PicturePreview = css`\n  width: 100%;\n  height: 100%;\n  object-fit: cover;\n`\n\nconst ErrorText = css`\nfont-weight: bold;\n  margin-top: 1.2em;\n  padding: 0.5em;\n  font-size: 0.8em;\n  color: red;\n`\n\nconst ChangeAvatarModal = (props: { open: boolean, onClose: () => void }) => {\n  const [picture, setPicture] = useState<FileList | null>(null);\n  const { setUser, setIsAuthenticated } = useContext(AuthContext);\n  const [isUploaded, setIsUploaded] = useState<boolean>(false);\n  // const [errorText, setErrorText] = useState<string>(\"\");\n\n  const initialize = () => {\n    setPicture(null);\n    setIsUploaded(false);\n  }\n\n  const handleClick = () => {\n    const formData = new FormData();\n    if (picture !== null) {\n      formData.append(\"profile-picture\", picture[0])\n    }\n\n    axios.post(`${backServer}/users/changeProfile`, formData, {\n      withCredentials: true,\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n      .then(res => {\n        setUser(res.data as IUser);\n        setIsUploaded(true);\n      })\n      .catch(() => {\n        setIsAuthenticated(false);\n      });\n  };\n\n  return (\n    <MinstagramModal\n      open={props.open}\n      onClose={() => { initialize(); props.onClose(); }}\n      title={isUploaded ? \"프로필이 변경되었습니다\" : \"프로필 변경하기\"}\n      next={picture && !isUploaded ? { text: '변경하기', onClick: handleClick } : undefined}\n    >\n      {!isUploaded &&\n        <NewPostContentContainer>\n          {!picture &&\n            <NewPostContent>\n              <p className={messageStyle}>업로드할 사진을 선택하세요.</p>\n              <label htmlFor=\"contained-button-file\">\n                <Input accept=\"image/*\" id=\"contained-button-file\" type=\"file\"\n                  onChange={(e) => setPicture(e.target.files)} />\n                <Button variant=\"contained\" component=\"span\">\n                  컴퓨터에서 선택\n                </Button>\n              </label>\n            </NewPostContent>\n          }\n          {picture && picture.length > 0 &&\n            <div className={PicturesPreviewContainer}>\n              <img src={URL.createObjectURL(picture[0])} className={PicturePreview} />\n            </div>\n          }\n        </NewPostContentContainer>}\n      {isUploaded && <NewPostContentContainer>\n        <NewPostContentContainer>\n          <NewPostContent>\n            <img src=\"https://www.instagram.com/static/images/creation/30fpsCheckLoopsOnce.gif/10a8cbeb94ba.gif\" />\n            <p className={messageStyle}>프로필이 변경되었습니다.</p>\n          </NewPostContent>\n        </NewPostContentContainer>\n      </NewPostContentContainer>}\n    </MinstagramModal >\n  )\n}\n\nexport default ChangeAvatarModal;","export default __webpack_public_path__ + \"static/media/before.d628f34a.svg\";","export default __webpack_public_path__ + \"static/media/next.ef7d1ff9.svg\";","import React, { useRef } from \"react\";\nimport { backServer } from \"../../configs/env\";\nimport { useState } from \"react\";\nimport before from '../../assets/before.svg'\nimport next from '../../assets/next.svg'\nimport { css } from \"@emotion/css\"\n\nconst navButton = css`\n  position: absolute;\n  top: 50%;\n  transform: translateY(-50%);\n  width: 1.6em;\n  height: 1.6em;\n  opacity: 0.5;\n`\n\nconst nextButton = css`\n  ${navButton}\n  left: 93%;\n`\n\nconst beforeButton = css`\n  ${navButton}\n  right: 93%;\n`\n\n// 넘기기 기능 구현할것\nconst PicturesView = (props: { pictures: string[], isURL?: boolean, sizeCalc?: boolean, style?: string, containerStyle?: string }) => {\n  const [viewSize, setViewSize] = useState<{ height: number, width: number }>()\n\n  // newPost에서는 isURL = true\n  const PostPictureContainer = css`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    object-fit: cover;\n    position: relative;\n    height: ${viewSize?.height && viewSize?.height > 0 && props.sizeCalc ? viewSize?.height + \"px\" : \"100%\"};\n    ${props.containerStyle}\n  `\n\n  const PostPicture = css`\n    /* display: block;\n    max-height: 100%;\n    max-width: 100%; */\n    ${props.style}\n  `;\n\n  const [current, setCurrent] = useState<number>(0);\n\n  const view = useRef<any>();\n\n  const onLoad = () => {\n    if (!viewSize && current === 0)\n      setViewSize({ height: view.current.offsetHeight, width: view.current.offsetWidth });\n  }\n\n  const onClickNext = () => {\n    if (current + 1 <= props.pictures.length - 1) {\n      setCurrent(current + 1)\n    }\n  }\n\n  const onClickBefore = () => {\n    if (current - 1 >= 0) {\n      setCurrent(current - 1)\n    }\n  }\n\n  return (\n    <div className={PostPictureContainer}>\n      {current - 1 >= 0 && <img src={before} onClick={onClickBefore} className={beforeButton} />}\n      <img\n        className={PostPicture}\n        src={props.isURL ? props.pictures[current] : `${backServer}/images/${props.pictures[current]}`}\n        ref={view}\n        onLoad={onLoad}\n      />\n      {current + 1 <= props.pictures.length - 1 && <img src={next} onClick={onClickNext} className={nextButton} />}\n    </div>\n  )\n}\n\nexport default PicturesView;","import React from \"react\"\nimport { css } from \"@emotion/css\"\n\nconst containerStyle = css`\n  position: relative;\n  height: 2.5em;\n  font-size: 0.85em;\n`\n\nconst childStyleBase = css`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n`\n\nconst redBold = css`\n  color: red;\n  font-weight: bold;\n`\n\nconst ModalMenuItem = (props: { onClick?: () => void, isRedBold?: boolean, style?: any, children: any }) => {\n\n  const childStyle = css`\n    ${childStyleBase}\n    ${props.style}\n    ${props.isRedBold ? redBold : undefined}\n  `\n\n  return (\n    <div onClick={props.onClick} className={containerStyle}>\n      <span className={childStyle}>\n        {props.children}\n      </span>\n    </div >\n  )\n}\n\nexport default ModalMenuItem;","import { backServer } from \"../configs/env\";\nimport axios from \"axios\";\n\nconst deletePost = (_id: string) => {\n  axios.delete(`${backServer}/posts/${_id}`, { withCredentials: true })\n}\n\nexport default deletePost;","/* eslint-disable @typescript-eslint/no-empty-function */\nimport { createContext } from \"react\";\nimport { IPost } from \"../types/postTypes\";\n\ninterface IPostContext {\n  post: IPost,\n  deletePost: () => void,\n  editPost: (text: string) => void,\n}\n\nconst PostContext = createContext<IPostContext>({\n  post: {} as IPost,\n  deletePost: () => { },\n  editPost: (text: string) => { }\n});\n\nexport default PostContext;","import { Divider } from \"@mui/material\"\nimport React from \"react\"\nimport styled from \"@emotion/styled\"\nimport MinstagramModal from \"./MinstagramModal\"\n\nconst MessageContainer = styled.div`\n  height: 7em;\n  position: relative;\n`\n\nconst Message = styled.span`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  font-weight: bold;\n`\n\nconst MessageAndButtonsModal = (props: {\n  open: boolean,\n  onClose: () => void,\n  title?: string,\n  message?: string,\n  width?: string,\n  // buttons: (typeof ModalMenuItem)[]j,\n  children: any\n}) => {\n  const { onClose, title, message } = props;\n\n  return (\n    <MinstagramModal open={props.open} onClose={onClose} title={title} width={props.width}>\n      {message && <>\n        <MessageContainer >\n          <Message>{message}</Message>\n        </MessageContainer>\n        <Divider />\n      </>}\n\n      <div className=\"minstagram-modal-buttons\">\n        {props.children}\n      </div>\n    </MinstagramModal>\n  )\n}\n\nexport default MessageAndButtonsModal;","/* eslint-disable @typescript-eslint/no-empty-function */\nimport { createContext } from \"react\";\n\nconst ToastContext = createContext<{ setToastOpen: (b: boolean) => void, toastMessage: string, setToastMessage: (s: string) => void }>({\n  setToastOpen: (b: boolean) => { },\n  toastMessage: \"\",\n  setToastMessage: (s: string) => { }\n})\n\nexport default ToastContext;\n\n","import React from \"react\"\nimport { Divider } from \"@mui/material\";\nimport ModalMenuItem from \"./ModalMenuItem\";\nimport * as deletePostAPI from \"../../modules/deletePost\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport { useContext } from \"react\";\nimport PostContext from \"../../context/postContext\";\nimport MessageAndButtonsModal from \"./MessageAndButtonsModal\";\nimport ToastContext from \"../../context/ToastContext\";\nimport axios from \"axios\";\nimport { backServer } from \"../../configs/env\";\n\nconst redBoldStyle = {\n  fontWeight: 'bold',\n  color: 'red'\n}\n\n\nconst DeleteConfirmModal = (props: { open: boolean, onClose: any, isComment?: boolean, commentIndex?: number }) => {\n  const [open, setOpen] = useState(props.open);\n  const { post, deletePost } = useContext(PostContext);\n  const { setToastMessage, setToastOpen } = useContext(ToastContext);\n\n  const deleteComment = (index: number | string) => {\n    axios.delete(`${backServer}/posts/${post._id}/comment/${index}`, { withCredentials: true })\n  }\n\n  const whatIsMe = props.isComment ? '댓글' : '게시물';\n\n  useEffect(() => {\n    setOpen(props.open);\n  }, [props.open])\n\n  const onDeleteClick = () => {\n    if (!props.isComment) {\n      // 백과 통신\n      deletePostAPI.default(post._id);\n      // 프론트에서 지우기\n      deletePost();\n    } else {\n      deleteComment(props.commentIndex as number);\n    }\n\n    setOpen(false);\n    props.onClose()\n    setToastMessage(`${whatIsMe}이 삭제되었습니다.`);\n    setToastOpen(true);\n  }\n\n  const onClickCancel = () => {\n    setOpen(false);\n    props.onClose();\n  }\n\n  return (\n    <MessageAndButtonsModal\n      open={open}\n      onClose={() => { props.onClose(); setOpen(false); }}\n      message={`${whatIsMe}을 삭제하시겠어요?`}\n      width=\"24em\"\n    >\n      <ModalMenuItem onClick={onDeleteClick} style={redBoldStyle}>\n        삭제\n      </ModalMenuItem>\n      <Divider />\n      <ModalMenuItem onClick={onClickCancel}>\n        취소\n      </ModalMenuItem>\n\n    </MessageAndButtonsModal>\n  )\n}\n\nexport default DeleteConfirmModal","import React from 'react'\nimport { useEffect } from 'react'\nimport { useState } from 'react'\nimport DeleteConfirmModal from './DeleteConfirmModal'\nimport MessageAndButtonsModal from './MessageAndButtonsModal'\nimport ModalMenuItem from './ModalMenuItem'\nimport { Divider } from '@mui/material'\n\nconst CommentMenuModal = (props: { open: boolean, onClose: () => void, index: number, isAuthor?: boolean, width?: string }) => {\n  const [open, setOpen] = useState<boolean>(props.open);\n  const [confirmModalOpen, setConfirmModalOpen] = useState<boolean>(false);\n\n  useEffect(() => {\n    setOpen(props.open)\n  }, [props.open])\n\n  const onClickDelete = () => {\n    setConfirmModalOpen(true);\n  }\n\n  return (\n    <MessageAndButtonsModal\n      open={open}\n      onClose={() => {\n        setOpen(false);\n        props.onClose();\n      }}\n      width={props.width}\n    >\n      {props.isAuthor &&\n        <>\n          <DeleteConfirmModal\n            open={confirmModalOpen}\n            onClose={() => {\n              setConfirmModalOpen(false);\n              setOpen(false);\n              props.onClose();\n            }}\n            isComment={true}\n            commentIndex={props.index}\n          />\n          <ModalMenuItem onClick={onClickDelete} isRedBold={true}>\n            삭제\n          </ModalMenuItem>\n          <Divider />\n        </>\n      }\n      <ModalMenuItem>\n        아무한테나 뜨는 항목\n      </ModalMenuItem>\n      <Divider />\n      <ModalMenuItem isRedBold={true}>\n        기능은 없지만 강조\n      </ModalMenuItem>\n    </MessageAndButtonsModal >\n  )\n}\n\nexport default CommentMenuModal","export default __webpack_public_path__ + \"static/media/option.bfbd5cca.svg\";","import React, { useState } from 'react'\nimport { css } from '@emotion/css'\nimport { IComment } from \"../../types/postTypes\";\nimport { Link } from 'react-router-dom';\nimport CommentMenuModal from '../Modal/CommentMenuModal';\nimport optionImg from '../../assets/option.svg'\nimport { useContext } from 'react';\nimport AuthContext from '../../context/authContext';\n\nconst Comment = (props: { comment: IComment, index: number, style?: string }) => {\n  const { comment, index, style } = props\n  const [open, setOpen] = useState(false);\n  const { user } = useContext(AuthContext);\n\n  const commentContainer = css`\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 0.2em;\n  `\n\n  const CommentContent = css`\n    ${style}\n  `;\n\n  const CommentAuthorName = css`\n    display: inline-block;\n    font-weight: bold;\n    margin-right: 1em;\n    ${style}\n  `;\n\n  return (\n    <div className={commentContainer} key={index}>\n      <CommentMenuModal\n        open={open}\n        onClose={() => setOpen(false)}\n        index={comment._id}\n        width=\"18em\"\n        isAuthor={comment.author._id === user._id}\n      />\n      <div>\n        <Link to={`/${comment.author.name}`}>\n          <span className={CommentAuthorName}>{comment.author.name}</span>\n        </Link>\n        <span className={CommentContent}>{comment.content}</span>\n      </div>\n      <img src={optionImg} className={css`width: 1em; height: 1em;`} onClick={() => { setOpen(true) }} />\n    </div>\n  )\n}\n\nexport default Comment;","import React, { useEffect, useState } from \"react\";\nimport { IComment } from \"../../types/postTypes\";\nimport { css } from \"@emotion/css\"\nimport Comment from \"./Comment\";\n\nconst moreComment = css`\n  color: darkgray;\n`\nconst commentsDisplayed = 2;\n\nconst Comments = (props: { comments: IComment[], isExpanded: boolean, style?: string }) => {\n  const { comments } = props;\n  const [isExpanded, setIsExpanded] = useState<boolean>(props.isExpanded);\n\n  // 처음 로드됐을 때, 댓글이 3개 이상이면 더 보기로 표시\n  // 댓글이 추가되어 2개에서 3개로 된다면 더 보기로 표시하지 않고 바로 표시\n  useEffect(() => {\n    setIsExpanded(props.isExpanded)\n  }, [props.isExpanded])\n\n  // 더 보기 클릭했을 때의 동작.\n  const handleClick = () => {\n    setIsExpanded(true);\n  }\n  // 백엔드에 코멘트 등록 및 프론트엔드 컴포넌트 업데이트\n\n  // 댓글의 개수가 2개 초과이면 2개까지만 보여주고 더 보기를 누르면 모든 댓글을 보여줌.\n  return (\n    <div>\n      <div className=\"comments\">\n        {!isExpanded && comments.length > 0 &&\n          comments.slice(0, commentsDisplayed).map((comment, index) => <Comment comment={comment} key={index} index={index} />)\n        }\n        {isExpanded && comments.length > 0 &&\n          comments.map((comment, index) => <Comment comment={comment} key={index} index={index} />)\n        }\n        {!isExpanded && comments.length > commentsDisplayed && <>\n          <a onClick={handleClick} className={moreComment}>댓글 {comments.length}개 모두 보기</a>\n        </>}\n      </div>\n    </div>\n  )\n}\n\nexport default Comments;","import React, { useEffect } from \"react\"\nimport { useState } from \"react\"\nimport styled from \"@emotion/styled\"\nimport { css } from \"@emotion/css\"\n\n\n\nconst TextEditorWithLength = (props: { textMaxLength: number, children: any, style?: string, fontSize?: string, width?: string, height?: string, setText?: any }) => {\n  const text = props.children.props.value;\n  const { textMaxLength, fontSize, width, height } = props;\n\n  const TextLength = styled.div`\n    position: absolute;\n    font-size: 0.8em;\n    color: ${text.length <= textMaxLength ? \"gray\" : \"red\"};\n    top: 105%;\n    left: 94%;\n    transform: translate(-90%, -90%);\n    \n  `;\n\n  useEffect(() => {\n    if (text.length > textMaxLength) {\n      props.setText(text.slice(0, textMaxLength));\n    }\n  }, [text])\n\n  const TextEditorWithLengthStyle = css`\n    width: 100%;\n    height: 12em;\n    position: relative;\n    ${props.style}\n  `\n\n  return (\n    <div className={TextEditorWithLengthStyle}>\n      {props.children}\n      <TextLength>\n        {`${text.length}/${textMaxLength}`}\n      </TextLength>\n    </div>\n  )\n}\n\nexport default TextEditorWithLength;","import React, { useState } from 'react'\nimport MinstagramModal from './MinstagramModal';\nimport { Button, Divider } from '@mui/material';\nimport styled from \"@emotion/styled\"\nimport { css } from \"@emotion/css\"\nimport Profile from '../Profile';\nimport { useContext } from 'react';\nimport AuthContext from '../../context/authContext';\nimport { backServer } from '../../configs/env';\nimport axios from 'axios';\nimport PicturesView from '../Post/PicturesView';\nimport TextEditorWithLength from '../TextEditorWithLength/TextEditorWithLength';\nimport { useEffect } from 'react';\nimport { IPost } from '../../types/postTypes';\n\nconst TEXT_MAX_LENGTH = 100;\n\nconst Input = styled.input`\n  display: none;\n`\n\nconst NewPostContent = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  text-align: center;\n`\nconst messageStyle = css`\n  font-size: 1.2em;\n  margin-bottom: 1em;\n  font-weight: 100;\n`\n\nconst PicturesPreviewContainer = css`\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n`\n\nconst PicturesPreviewTextEditorContainer = css`\n  width: 35%;\n  border-left: 1px solid gainsboro;\n`\n\nconst PicturesPreviewTextEditor = css`\n  margin: 0;\n  padding: 7px;\n  border: 0;\n  outline: none;\n  resize: none;\n  font-family: inherit;\n  width: 95%;\n  height: 100%;\n`\n\nconst ErrorText = css`\n  font-weight: bold;\n  margin-top: 1.2em;\n  padding: 0.5em;\n  font-size: 0.8em;\n  color: red;\n`\n\nconst NewPostModal = (props: { open: boolean, onClose: () => void, originalPost?: IPost }) => {\n  const { originalPost } = props;\n  const [pictures, setPictures] = useState<FileList | string[] | null>(\n    originalPost ? originalPost.pictures : null\n  );\n  const [text, setText] = useState<string>(originalPost ? originalPost.text : \"\");\n  const { user } = useContext(AuthContext);\n  const [isUploaded, setIsUploaded] = useState<boolean>(false);\n  const [errorText, setErrorText] = useState<string>(\"\");\n\n  const initialize = () => {\n    setText(\"\");\n    setPictures(null);\n    setIsUploaded(false);\n  }\n\n  const NewPostContentContainer = css`\n    /* position: relative; */\n    height: ${(!pictures || isUploaded) ? \"25em\" : \"100%\"};\n  `\n\n  useEffect(() => {\n    if (errorText.length > 0 && text.length > 0)\n      setErrorText(\"\");\n  }, [text])\n\n  const handleClick = () => {\n    if (!text) {\n      setErrorText(\"! 문구를 입력해 주세요.\")\n      return;\n    }\n\n    if (!originalPost) {\n      const formData = new FormData();\n      if (pictures !== null) {\n        for (let i = 0; i < pictures.length; i++) {\n          formData.append(\"pictures\", pictures[i]);\n        }\n      }\n      formData.append(\"text\", text);\n\n      axios.post(`${backServer}/posts/new`, formData, {\n        withCredentials: true,\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      })\n        .then(() => {\n          setIsUploaded(true);\n        });\n    } else {\n      axios.post(`${backServer}/posts/${originalPost._id}/edit`, { text }, { withCredentials: true })\n        .then(() => setIsUploaded(true))\n    }\n  };\n\n  return (\n    <MinstagramModal\n      open={props.open}\n      onClose={() => { initialize(); props.onClose(); }}\n      title={isUploaded ?\n        (originalPost ? \"게시물이 수정되었습니다\" : \"게시물이 공유되었습니다\") :\n        (originalPost ? \"게시물 수정하기\" : \"새 게시물 만들기\")\n      }\n      width={pictures && !isUploaded ? \"75%\" : \"30em\"}\n      height={pictures && !isUploaded ? \"80%\" : \"30em\"}\n      next={pictures && !isUploaded ?\n        { text: (originalPost ? '수정하기' : '공유하기'), onClick: handleClick } :\n        undefined}\n    >\n      {!isUploaded &&\n        <div className={NewPostContentContainer}>\n          {!pictures &&\n            <NewPostContent>\n              <p className={messageStyle}>업로드할 사진을 선택하세요.</p>\n              <label htmlFor=\"contained-button-file\">\n                <Input accept=\"image/*\" id=\"contained-button-file\" multiple type=\"file\"\n                  onChange={(e) => setPictures(e.target.files)} />\n                <Button variant=\"contained\" component=\"span\">\n                  컴퓨터에서 선택\n                </Button>\n              </label>\n            </NewPostContent>\n          }\n          {pictures && pictures.length > 0 &&\n            <div className={PicturesPreviewContainer}>\n              <PicturesView\n                pictures={!originalPost ?\n                  Array.from(pictures as FileList).map((picture) => {\n                    return URL.createObjectURL(picture)\n                  }) :\n                  originalPost.pictures\n                }\n                isURL={!originalPost}\n                containerStyle={css`width: 65%;`}\n                style={css`max-width: 100%; max-height: 100%;`}\n              />\n              <div className={PicturesPreviewTextEditorContainer}>\n                <div style={{ margin: \"0.5em\" }}>\n                  <Profile user={user} />\n                </div>\n                <TextEditorWithLength\n                  style={css`\n                    height: 19em;\n                    font-size: 0.8em;\n                  `}\n                  textMaxLength={500}\n                  setText={setText}\n                >\n                  <textarea\n                    className={PicturesPreviewTextEditor}\n                    placeholder={\"문구 입력...\"}\n                    value={text}\n                    onChange={(e) => setText(e.target.value)}\n                  />\n                </TextEditorWithLength>\n\n                {errorText &&\n                  <>\n                    <Divider />\n                    <div className={ErrorText}>\n                      {errorText}\n                    </div>\n                  </>}\n              </div>\n            </div>\n          }\n        </div>}\n      {isUploaded &&\n        <div className={NewPostContentContainer}>\n          <NewPostContent>\n            <img src=\"https://www.instagram.com/static/images/creation/30fpsCheckLoopsOnce.gif/10a8cbeb94ba.gif\" />\n            <p className={messageStyle}>게시물이 공유되었습니다.</p>\n          </NewPostContent>\n        </div>}\n    </MinstagramModal >\n  )\n}\n\nexport default NewPostModal;","import React, { useContext } from \"react\"\nimport { Modal, Box, Divider, Dialog } from \"@mui/material\";\nimport ModalMenuItem from \"./ModalMenuItem\";\nimport { Link } from \"react-router-dom\"\nimport DeleteConfirmModal from \"./DeleteConfirmModal\";\nimport { useState } from \"react\";\nimport { useEffect } from \"react\";\nimport PostContext from \"../../context/postContext\";\nimport MessageAndButtonsModal from \"./MessageAndButtonsModal\";\nimport ToastContext from \"../../context/ToastContext\";\nimport NewPostModal from \"./NewPostModal\";\n\nconst redBoldStyle = {\n  fontWeight: 'bold',\n  color: 'red'\n}\n\nconst PostMenuModal = (props: { open: boolean, onClose: any, isAuthor: boolean, width?: string }) => {\n  const [showDelete, setShowDelete] = React.useState(false);\n  const [open, setOpen] = useState<boolean>(false);\n  const [showEdit, setShowEdit] = useState<boolean>(false);\n  const { post } = useContext(PostContext)\n\n  useEffect(() => {\n    setOpen(props.open)\n  }, [props.open])\n\n  return (\n    <MessageAndButtonsModal\n      open={open}\n      onClose={() => {\n        setOpen(false);\n        setShowDelete(false);\n        props.onClose();\n      }}\n      width={props.width}\n    >\n      <DeleteConfirmModal\n        open={showDelete}\n        onClose={() => {\n          setOpen(false);\n          setShowDelete(false);\n          props.onClose();\n        }}\n      />\n      <NewPostModal\n        open={showEdit}\n        onClose={() => {\n          setShowEdit(false);\n          setOpen(false);\n          props.onClose();\n        }}\n        originalPost={post}\n      />\n      {props.isAuthor && <>\n        <ModalMenuItem onClick={() => setShowEdit(true)}>\n          수정\n        </ModalMenuItem>\n        <Divider />\n        <ModalMenuItem onClick={() => setShowDelete(true)} style={redBoldStyle}>\n          삭제\n        </ModalMenuItem>\n        <Divider />\n      </>}\n      <Link to={`/posts/${post._id}`} onClick={() => setOpen(false)}>\n        <ModalMenuItem>\n          게시물로 이동\n        </ModalMenuItem>\n      </Link>\n    </MessageAndButtonsModal >\n  )\n}\n\nexport default PostMenuModal","import { backServer } from \"../configs/env\";\nimport axios from \"axios\";\n\nconst getPost = (_id: string) => {\n  return axios.get(`${backServer}/posts/${_id}`)\n}\n\nexport default getPost;","import React, { useState } from \"react\"\nimport { css } from \"@emotion/css\"\n\nconst commentForm = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: 2em;\n  padding: 0.3em;\n  /* padding: 0.5em; */\n`\n\nconst commentInput = css`\n  margin-left: 0.4em;\n  width: 90%;\n  outline: none;\n  border: none;\n`\n\nconst commentInputButton = css`\n  width: 2em;\n  margin-right: 0.4em;\n  color: dodgerblue;\n  font-weight: bold;\n`\n\nconst CommentForm = (props: { onSubmit: (text: string) => void }) => {\n  const [text, setText] = useState<string>(\"\");\n\n  const handleChange = (e: any) => {\n    setText(e.target.value);\n  }\n\n  // text를 현재 포스트에 등록하고\n  // 코멘트 목록 업데이트\n  const handleClick = () => {\n    props.onSubmit(text);\n    setText(\"\");\n  };\n\n  return (\n    <div className={commentForm}>\n      <input type=\"text\" onChange={handleChange} value={text} className={commentInput} placeholder=\"댓글 달기...\" />\n      <a onClick={handleClick} className={commentInputButton} >게시</a>\n    </div >\n  )\n}\n\nexport default CommentForm;","import React, { useState, useContext, useLayoutEffect } from \"react\";\nimport Profile from \"../Profile\";\nimport PicturesView from \"./PicturesView\"\n// import Likes from \"./Likes\"\nimport Comments from \"./Comments\"\nimport styled from \"styled-components\";\nimport { IPost } from \"../../types/postTypes\";\nimport option from \"../../assets/option.svg\"\nimport PostMenuModal from \"../Modal/PostMenuModal\";\nimport getPost from \"../../modules/getPost\";\nimport { useParams } from \"react-router-dom\";\nimport AuthContext from \"../../context/authContext\";\nimport PostContext from \"../../context/postContext\"\nimport axios from \"axios\"\nimport { backServer } from \"../../configs/env\";\nimport CommentForm from \"./CommentForm\";\nimport { Divider } from \"@mui/material\";\nimport { css } from \"@emotion/css\"\n\nconst commentsDisplayed = 2;\n\n// --- 일반 post style ---\nconst postContent = css`\n  padding-bottom: 0.3em;\n  text-align: left;\n  font-size: 0.9em;\n`\n\nconst SPostTopBar = css`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding-top: 0.6em;\n  padding-bottom: 0.6em;\n  padding-left: 0.7em;\n  padding-right: 0.7em;\n`;\n\nconst PostTopBarButton = styled.img`\n  width: 1em;\n  height: 1em;\n`;\n\n// --- 일반 post style 끝 ---\n\n// --- 모달 post style 시작 ---\nconst postModal = css`\n  display: flex;\n  flex-direction: row;\n  height: 100%;\n`;\n\nconst picturesViewContainer = css`\n  border-right: 1px solid gainsboro;\n  width: 65%;\n  height: 100%;\n`;\n\nconst postModalSide = css`\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  width: 35%;\n  /* flex-shrink: 2; */\n`;\n\nconst postModalSideTop = css`\n  border-bottom: 1px solid gainsboro;\n`\n\n// --- 모달 post style 끝 ---\n\nconst SPostTextContainer = css`\n  text-align: left;\n  margin-top: 0.7em;\n  padding-left: 0.7em;\n  padding-right: 0.7em;\n  margin-bottom: 0.2em;\n  font-size: 0.9em;\n`;\n\nconst SCommentsStyle = css`\n  font-size: 0.9em;\n  /* margin-top: 1em; */\n`\n\nconst SPostPictures = css`\n  max-width: 100%;\n  max-height: 40em;\n`\n\ninterface PostsProps {\n  setPost?: (post: IPost) => void,\n  postComeFirst?: () => void\n}\n\n\nconst Post = (props: (IPost & PostsProps & { style?: string, isModal?: boolean } | Record<string, never>)) => {\n  const { postId } = useParams<{ postId: string }>();\n  const [post, setPost] = useState<IPost>({} as IPost);\n  const [show, setShow] = React.useState(false);\n  const [isInitialLoad, setIsInitialLoad] = useState<boolean>(true);\n  const { user } = useContext(AuthContext);\n  const [isCommentExpanded, setIsCommentExpanded] = useState<boolean>(false);\n\n  const postMenuModal = () =>\n    <PostMenuModal\n      open={show}\n      onClose={() => {\n        setShow(false);\n      }}\n      isAuthor={user._id === post.author._id}\n      width=\"18em\"\n    />\n\n  const PostStyle = css`\n    width: 55%;\n    max-width: 40em;\n    border: solid 0.1em gainsboro;\n    margin-bottom: 1em;\n    ${props.style}\n  `\n\n  const handleCommentSubmit = (text: string) => {\n    axios.post(`${backServer}/posts/${post._id}/comment`, {\n      content: text,\n      likes: []\n    }, { withCredentials: true }).then((res: any) => {\n      if (post.comments.length === commentsDisplayed) setIsCommentExpanded(true);\n      setPost(prev => {\n        const { comments, ...rest } = prev;\n        return { comments: [...comments, res.data], ...rest };\n      })\n    })\n      .catch(e => {\n        console.log(e);\n      })\n  }\n\n  useLayoutEffect(() => {\n    if ('_id' in props) {\n      // Posts로부터 렌더링 되었을 때\n      const { setPost: s, postComeFirst: t, ...p } = props;\n      setPost(p as IPost);\n      setIsInitialLoad(false);\n    } else {\n      // <Post /> 로써 렌더링 되었을 때\n      // props.setPost가 없을 것이다.\n      // 비동기 작업이 있기 때문에 별도의 변수로 작업 종료를 관리해야 한다.\n      getPost(postId)\n        .then((res: any) => {\n          setPost(res.data);\n          setIsInitialLoad(false);\n        })\n    }\n  }, [])\n\n  // TODO: like button 구현\n  // const handleLike = (like: ILike) => {\n  //   setLikes([...likes, like]);\n  // };\n\n  return (\n    <PostContext.Provider value={{\n      // post._id가 undefined일 수도 있다.\n      post: post,\n      deletePost: () => {\n        if (props.setPost && props.postComeFirst) {\n          const { isDeleted: i, ...rest } = post;\n          setPost({ isDeleted: true, ...rest });\n          props.setPost({ isDeleted: true, ...rest })\n          props.postComeFirst()\n        }\n      },\n      editPost: (text: string) => {\n        if (props.setPost && props.postComeFirst) {\n          const { text: t, ...rest } = post;\n          setPost({ text: text, ...rest })\n          props.setPost({ text: text, ...rest })\n          props.postComeFirst()\n        }\n      }\n    }} >\n      {\n        !isInitialLoad && !post.isDeleted && !props.isModal &&\n        <div className={PostStyle} key={post._id}>\n          {postMenuModal()}\n          <div className={SPostTopBar}>\n            {/* FIXME: use context */}\n            <Profile user={post.author} />\n            {/* <PostMenu /> */}\n            <PostTopBarButton src={option} onClick={() => setShow(true)} />\n          </div>\n          <Divider />\n          <PicturesView\n            pictures={post.pictures}\n            style={SPostPictures}\n            containerStyle={css`min-height: 15em;`}\n            sizeCalc={true}\n          />\n\n          {/* {likes.length > 0 && <Likes likes={likes} />} */}\n          {post.text &&\n            <div className={SPostTextContainer}>\n              <b>{post.author.name}</b> &nbsp; {post.text}\n            </div>\n          }\n\n          <Comments\n            comments={post.comments}\n            isExpanded={isCommentExpanded}\n            style={SCommentsStyle}\n          />\n\n          <Divider />\n          <CommentForm onSubmit={handleCommentSubmit} />\n        </div >\n      }\n      {\n        !isInitialLoad && !post.isDeleted && props.isModal &&\n        <div className={postModal}>\n          {postMenuModal()}\n          <PicturesView\n            pictures={post.pictures}\n            containerStyle={picturesViewContainer}\n            style={css`max-width: 100%; max-height: 100%;`}\n          />\n\n          <div className={postModalSide}>\n            <div className={postModalSideTop}>\n              <div className={SPostTopBar}>\n                {/* FIXME: use context */}\n                <Profile user={post.author} />\n                {/* <PostMenu /> */}\n                <PostTopBarButton src={option} onClick={() => setShow(true)} />\n              </div>\n              <Divider />\n              {post.text && <div className={SPostTextContainer}>\n                <b>{post.author.name}</b> &nbsp; {post.text}\n              </div>}\n\n              <Comments\n                comments={post.comments}\n                isExpanded={isCommentExpanded}\n                style={SCommentsStyle}\n              />\n            </div>\n            <div>\n              <Divider />\n              <CommentForm onSubmit={handleCommentSubmit} />\n            </div>\n          </div>\n        </div>\n      }\n      {/* {post.isDeleted && <>\n        <div className=\"deleted-post\">\n          Whoooo! Deleted Post!\n        </div>\n      </>} */}\n    </PostContext.Provider >\n  );\n}\n\nexport default Post;","import React from \"react\";\nimport MinstagramModal from \"./MinstagramModal\";\nimport Post from \"../Post/Post\";\nimport { IPost } from \"../../types/postTypes\";\nimport { css } from \"@emotion/css\"\n\n\nconst PostStyle = css`\n  margin-bottom: 0;\n  border: none;\n`\n\nconst PostViewModal = (props: { open: boolean, onClose: () => void, post: IPost }) => {\n  return (\n    <MinstagramModal\n      open={props.open}\n      onClose={props.onClose}\n      width=\"75%\"\n      height=\"80%\"\n    >\n      <Post {...props.post} style={PostStyle} isModal={true} />\n    </MinstagramModal >\n  )\n}\n\nexport default PostViewModal","import React, { useLayoutEffect, useState } from \"react\";\nimport { IPost, IUser } from \"../../types/postTypes\"\nimport { backServer } from \"../../configs/env\";\nimport axios from \"axios\"\nimport styled from \"styled-components\";\nimport Profile from \"../Profile\";\nimport { useParams } from \"react-router-dom\";\nimport { css } from '@emotion/css'\nimport ChangeAvatarModal from \"../Modal/ChangeAvatarModal\";\nimport PostViewModal from \"../Modal/PostViewModal\";\n\nconst ContentWrapperCentered = styled.div`\n  justify-content: center;\n  max-width: 70%;\n  margin-left: auto;\n  margin-right: auto;\n  align-items: center;\n  `\n\nconst Posts = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  /* width: 100%;\n  height: 100%; */\n  max-width: 100%;\n`\n\nconst PostThumbnail = styled.img`\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  /* margin: 0.3em; */\n  /* margin-left: auto;\n  margin-right: auto; */\n  object-fit: cover;\n`\n\nconst UserProfileContainer = css`\n  padding-top: 3em;\n  margin-bottom: 3em;\n  `\n\nconst thumbnailContainer = css`\n  width: 24%;\n  padding-top: 25%; /* 1:1 Aspect Ratio */\n  position: relative;\n  margin: 0.5%;\n`\n\nconst Mypage = (props: { userName?: string }) => {\n  // react router로 param을 받거나 props로 userName을 받는다.\n  const { userNameParam } = useParams<{ userNameParam: string }>();\n  const userName = props.userName || userNameParam;\n  // const [user, setUser] = useState<IUser>({ _id: \"\", name: \"\", avatar: \"\", email: \"\" });\n  const [posts, setPosts] = useState<IPost[]>([]);\n  const [user, setUser] = useState<IUser>({} as IUser)\n  // const { user, setUser } = useContext(AuthContext);\n  const [changeProfileOpen, setChangeProfileOpen] = useState(false);\n  const [postViewOpen, setPostViewOpen] = useState(false);\n  const [currentPost, setCurrentPost] = useState<number>(0);\n  const [isFetching, setIsFetching] = useState<boolean>(true);\n\n\n  // FIXME: res typed any\n  // load user info/posts\n  useLayoutEffect(() => {\n    async function fetchPosts() {\n      const res: any = await axios.get(`${backServer}/users/name`, {\n        params: {\n          name: userName\n        }\n      })\n      console.log(res)\n      setUser(res.data);\n\n      const posts = await getPosts(res.data._id);\n      setIsFetching(false);\n      setPosts(posts);\n    }\n    fetchPosts();\n  }, [props.userName, userNameParam]);\n\n  const getPosts = async (id: string): Promise<IPost[]> => {\n    if (!id) throw Error(\"no id given\");\n    const posts: any = await axios.get(`${backServer}/users/${id}/posts`, { withCredentials: true });\n    return posts.data\n  }\n\n  const renderPost = (post: IPost, i: number) => {\n    return (\n      <div key={post._id} className={thumbnailContainer}>\n        <PostThumbnail\n          src={backServer + '/images/' + post.pictures[0]}\n          onClick={() => {\n            setCurrentPost(i);\n            setPostViewOpen(true);\n          }} />\n      </div>\n    )\n  }\n\n  // useLayoutEffect에서 user를 만들기 때문에 type assertion 했다.\n  return (\n    <>\n      {!isFetching &&\n        <ContentWrapperCentered>\n          <ChangeAvatarModal\n            open={changeProfileOpen}\n            onClose={() => setChangeProfileOpen(false)}\n          />\n          <PostViewModal\n            open={postViewOpen}\n            onClose={() => setPostViewOpen(false)}\n            post={posts[currentPost]}\n          />\n          <div className={UserProfileContainer}>\n            <div onClick={() => setChangeProfileOpen(true)}>\n              <Profile user={user} imageWidth=\"7em\" nameFontSize=\"2.5em\" />\n            </div>\n          </div>\n\n          <Posts>\n            {posts?.length === 0 && <span className={css`font-size: 1.3em;`}>아직 아무 것도 올리지 않았어요.</span>}\n            {posts?.length > 0 && posts.map(renderPost)}\n          </Posts>\n        </ContentWrapperCentered>\n      }\n    </>\n  )\n}\n\nexport default Mypage;","export default __webpack_public_path__ + \"static/media/heart.6837acf8.svg\";","export default __webpack_public_path__ + \"static/media/newpost.ad666e89.svg\";","import React, { useState, useContext } from \"react\"\nimport direct from \"./direct.svg\"\nimport heart from \"./heart.svg\"\nimport Profile from \"../Profile\"\nimport newpost from \"./newpost.svg\"\nimport \"./TopBar.css\"\nimport styled from \"styled-components\"\nimport { Link } from \"react-router-dom\"\nimport AuthContext from \"../../context/authContext\"\nimport axios from \"axios\"\nimport { backServer } from \"../../configs/env\"\nimport NewPostModal from \"../Modal/NewPostModal\"\nimport { css } from \"@emotion/css\"\n\nconst TopBarButton = styled.img`\n  width: 1.5em;\n  height: 1.5em;\n  margin-right: 5px;\n`;\n\nconst TopBarProfile = css`\n  margin-right: 0.5em;\n`\n\n//https://mui.com/guides/routing/#list\n\nconst TopBar = () => {\n  const { user, setIsAuthenticated, setUser } = useContext(AuthContext);\n  const [isNewPost, setIsNewPost] = useState(false);\n  const useLogout = () => {\n    axios.get(`${backServer}/users/logout`, { withCredentials: true })\n    setIsAuthenticated(false);\n    setUser({ _id: \"\", name: \"\", avatar: \"\", email: \"\" });\n  }\n  // const { show, anchorPoint, handleContext } = useContextMenu();\n\n  return (\n    <div id=\"TopBar\">\n      <NewPostModal open={isNewPost} onClose={() => { setIsNewPost(false) }} />\n      <Link to=\"/\">\n        <span className=\"logo\">\n          Minstagram\n        </span>\n      </Link>\n\n      <span id=\"TopBarRightSide\">\n        <span id=\"TopBarButtons\">\n          {/* <Link to=\"/directs\">\n            <TopBarButton src={direct} />\n          </Link> */}\n          <TopBarButton src={heart} onClick={useLogout} />\n          {/* <Link to=\"/newPost\"> */}\n          <TopBarButton src={newpost} onClick={() => { setIsNewPost(true) }} />\n          {/* </Link> */}\n        </span>\n        <span className={TopBarProfile}>\n          <Profile user={user} imageWidth=\"1.7em\" />\n        </span>\n\n\n        {/* {show && <ul\n          className=\"menu\"\n          style={{\n            top: anchorPoint.y,\n            left: anchorPoint.x\n          }}\n        >\n          <li>Share to..</li>\n          <li>Cut</li>\n          <li>Copy</li>\n          <li>Paste</li>\n          <hr className=\"divider\" />\n          <li>Refresh</li>\n          <li>Exit</li>\n        </ul>} */}\n      </span>\n    </div >\n  )\n}\n\nexport default TopBar","import axios from \"axios\";\nimport React, { useLayoutEffect, useEffect } from \"react\";\nimport { backServer } from \"../../configs/env\";\nimport { IPost } from \"../../types/postTypes\"\nimport { Snackbar } from \"@mui/material\";\nimport Post from \"./Post\";\nimport ToastContext from \"../../context/ToastContext\";\nimport { useParams } from \"react-router-dom\";\n\n// post를 서버에서 가져오고 저장\nconst Posts = (props: { posts?: IPost[], postIds?: string[] }) => {\n  const [posts, setPosts] = React.useState<IPost[]>(props.posts ?? []);\n  const [toastOpen, setToastOpen] = React.useState(false);\n  const [toastMessage, setToastMessage] = React.useState(\"\");\n\n  const setPost = (i: number) => {\n    return (newPost: IPost) => {\n      setPosts([...posts.slice(0, i), newPost, ...posts.slice(i + 1)])\n    }\n  }\n\n  // useEffect(() => {\n  //   const orderPosts = () => {\n  //     setPosts(posts.reverse())\n  //   }\n  //   orderPosts();\n  // }, [])\n\n  const postComeFirst = (i: number) => {\n    setPosts([posts[i], ...posts.slice(0, i), ...posts.slice(i + 1)])\n  }\n\n  useLayoutEffect(() => {\n    if (posts.length === 0) {\n      axios.get(`${backServer}/posts/`, { params: { pageSize: 50 } })\n        .then(res => {\n          setPosts(res.data as IPost[]);\n        })\n    }\n  }, [posts])\n\n  const handleToastClose = (\n    event: React.SyntheticEvent | React.MouseEvent,\n    reason?: string,\n  ) => {\n    if (reason === 'clickaway') {\n      return;\n    }\n\n    setToastOpen(false);\n  };\n\n  return (\n    <div className=\"posts\">\n      <ToastContext.Provider value={{ setToastOpen, toastMessage, setToastMessage }}>\n        {posts.map((post, i) => {\n          const { _id } = post;\n          return <Post key={_id} {...post} setPost={setPost(i)} postComeFirst={() => postComeFirst(i)} />\n        })}\n      </ToastContext.Provider>\n      <Snackbar\n        open={toastOpen}\n        autoHideDuration={6000}\n        onClose={handleToastClose}\n        message={toastMessage}\n      />\n    </div >\n  )\n}\n\nexport default Posts;","// 사진을 입력받아 profile 사진 변경\n\nimport React, { useState, useContext } from \"react\";\nimport axios from \"axios\"\nimport { backServer } from \"../../configs/env\";\nimport AuthContext from \"../../context/authContext\";\nimport { IUser } from \"../../types/postTypes\";\nimport { Redirect } from \"react-router-dom\";\n\n// TODO: 이미지 미리보기 어떤 식으로 지원할지?\n// TODO: 이미지 비율 안바뀌도록 조정하기\nconst ChangeProfile = () => {\n  const [picture, setPicture] = useState<FileList | null>(null);\n  const [isSuccess, setIsSuccess] = useState<boolean>(false);\n  const { setIsAuthenticated, setUser, user } = useContext(AuthContext);\n  // 두 번째 항목에는 에러 코드(404)를 저장하도록\n  // const [isError, setIsError] = useState<{ isError: boolean, error: string }>({ isError: false, error: \"\" });\n\n  const handleClick = () => {\n    const formData = new FormData();\n    if (picture !== null) {\n      formData.append(\"profile-picture\", picture[0]);\n    }\n\n    axios.post(`${backServer}/users/changeProfile`, formData, {\n      withCredentials: true,\n      headers: {\n        'Content-Type': 'multipart/form-data'\n      }\n    })\n      .then(res => {\n        setUser(res.data as IUser);\n        setIsSuccess(true);\n      })\n      .catch(err => {\n        setIsAuthenticated(false);\n      });\n  };\n\n  if (isSuccess) return <Redirect to={\"/\" + user.name} />\n\n  return (\n    <div id=\"changeProfile\">\n      {/* {isError.isError ?\n        <Redirect to=\"/login\" /> :\n        <> */}\n      <input type=\"file\" onChange={(e) => setPicture(e.target.files)} accept=\"image/png, image/jpeg\" />\n      <br />\n      <input type=\"button\" value=\"저장\" onClick={handleClick} />\n      <br />\n      {picture && picture.length > 0 &&\n        Array.from(picture).map((picture, index) => (\n          <img key={index} src={URL.createObjectURL(picture)} width=\"300em\" />\n        ))\n      }\n      {/* </>\n      } */}\n    </div>\n  );\n};\n\nexport default ChangeProfile;","import React, { useState } from \"react\"\nimport axios from \"axios\"\nimport { backServer } from \"../../configs/env\"\nimport { useHistory, useLocation, useParams } from \"react-router-dom\"\n\nconst EditPost = () => {\n  const textProp = useLocation<{ text: string }>().state.text;\n  const history = useHistory();\n  const { postId } = useParams<{ postId: string }>();\n  // FIXME param URL로 변경시....\n  const [text, setText] = useState<string>(textProp)\n\n  const handleSubmit = async () => {\n    await axios.post(`${backServer}/posts/${postId}/edit`, { text }, { withCredentials: true })\n    history.push('/')\n  }\n\n  return (\n    <div id=\"editPost\">\n      <textarea value={text} onChange={(e) => setText(e.target.value)} />\n      <input type=\"button\" onClick={handleSubmit} />\n    </div>\n  )\n}\n\nexport default EditPost","import React, { useContext } from \"react\"\nimport { IDirectRoom, IDirectMessage } from \"../../types/directs\";\nimport AuthContext from \"../../context/authContext\";\nimport { css } from \"@emotion/css\";\nimport { backServer } from \"../../configs/env\";\nimport Profile from \"../Profile\";\n\nconst directMessageContainer = css`\n  display: flex;\n  flex-direction: row;\n`\n\nconst directMessages = css`\n  max-height: 30em; \n  max-width: 60em;\n  overflow-y: scroll;\n  display: flex;\n  flex-direction: column;\n`\n\nconst directMessage = css`\n  display: flex;\n  align-items: flex-end;\n`\n\nconst directMessageMe = css`\n  /* ${directMessage} */\n  /* flex-direction: column;\n  align-self: flex-end; */\n  margin-right: 0;\n  margin-left: auto;\n`\n\nconst directMessageFriend = css`\n  ${directMessage}\n  flex-direction: row;\n  align-self: flex-start;\n`\n\nconst directMessageContent = css`\n  height: 1em;\n  padding: 1em;\n  border-radius: 1.2em;\n  margin-top: 0.3em;\n  margin-bottom: 0.3em;\n`\n\nconst directMessageContentMe = css`\n  ${directMessageContent};\n  background-color: blue;\n  position: relative;\n  text-align: right;\n`\n\nconst directMessageContentFriend = css`\n  ${directMessageContent};\n  background-color: red;\n  position: relative;\n  text-align: left;\n`\n\nconst directMessageAuthorAvatar = css`\n  color: green;\n`\n\nconst DirectMessages = (props: { direct?: IDirectRoom }) => {\n  const { direct } = props;\n  const { user } = useContext(AuthContext);\n\n\n  const renderItems = (message: IDirectMessage) => {\n    const isMe = message.author._id === user._id;\n    return (\n      <div className={directMessageContainer}>\n        <div className={isMe ? directMessageMe : directMessageFriend}>\n          {!isMe &&\n            <div className={directMessageAuthorAvatar}>\n              <Profile user={message.author} nameShown={false} imageWidth=\"2em\" />\n            </div>\n          }\n          <div className={isMe ? directMessageContentMe : directMessageContentFriend}>\n            {message.content}\n          </div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={directMessages}>\n      {direct ? direct.messages.map(renderItems) : \"no content\"}\n    </div>\n  )\n}\n\nexport default DirectMessages;","import React from \"react\"\nimport { IUser } from \"../../types/postTypes\";\nimport DirectMessages from \"./DirectMessages\";\nimport { IDirectMessage, IDirectRoom } from \"../../types/directs\";\nimport CommentForm from \"../Post/CommentForm\";\nimport { useState, useContext } from \"react\";\nimport { useEffect } from \"react\";\nimport axios from \"axios\";\nimport { backServer } from \"../../configs/env\";\nimport { io } from \"socket.io-client\";\nimport Cookies from \"js-cookie\";\nimport AuthContext from \"../../context/authContext\";\n\n\nconst Direct = (props: { users: IUser[] }) => {\n  const { users } = props;\n\n  const [direct, setDirect] = useState<IDirectRoom | null>(null);\n  const [socket, setSocket] = useState<any>();\n  const [text, setText] = useState<string>(\"\");\n  const { user } = useContext(AuthContext);\n\n  const newMessage = (msg: IDirectMessage) => {\n    setDirect(prev => {\n      if (!prev) return null;\n      const { messages, ...rest } = prev;\n      return { messages: [...messages, msg], ...rest };\n    })\n  }\n\n  //\n  // direct 객체 서버에서 받아오기\n  //\n  useEffect(() => {\n    const a = async () => {\n      try {\n        const res: any = await axios.get(`${backServer}/directs/withUsers`,\n          {\n            params: {\n              userId1: users[0]._id,\n              userId2: users[1]._id\n            }\n          })\n        setDirect(res.data[0] as IDirectRoom)\n      } catch (e) {\n        console.log(e)\n        try {\n          const res = await axios.post(`${backServer}/directs/newRoom`,\n            users.map(user => user._id)\n          )\n          setDirect({\n            _id: res.data as string,\n            members: users,\n            messages: [],\n            bookmarks: [0, 0]\n          })\n        } catch (e) {\n          console.log(e)\n        }\n      }\n    }\n    a();\n  }, [])\n\n  //\n  // socket 만들기\n  //\n  useEffect(() => {\n    if (direct === null) return;\n    const socket = io(backServer);\n\n    socket.on(\"connect\", () => {\n      socket.emit(\"join\", direct._id, Cookies.get('credential'))\n    })\n\n    socket.on(\"messageEvent\", newMessage);\n\n    setSocket(socket);\n\n    return () => {\n      socket.off(\"messageEvent\", newMessage);\n      socket.disconnect();\n    }\n  }, [direct?.members])\n\n  // 텍스트 창 비우고, direct state 갱신 및 서버 통신\n  const onSubmitMessage = () => {\n    const msg = {\n      author: user,\n      content: text,\n      timestamp: new Date()\n    }\n    // newMessage(msg);\n    if (socket) socket.emit(\"messageEvent\", msg);\n    setText(\"\")\n  }\n\n  return (\n    <div>\n      {direct && <DirectMessages direct={direct} />}\n      <div>\n        <input type=\"text\" value={text} onChange={(e) => setText(e.target.value)} />\n        <input type=\"button\" value=\"보내기\" onClick={onSubmitMessage} />\n      </div>\n      {/* <CommentForm onSubmit={onSubmitMessage} /> */}\n    </div>\n  )\n}\n\nexport default Direct;","import React, { useLayoutEffect, useContext, useState, useEffect } from \"react\";\nimport { Box } from \"@mui/system\";\nimport { backServer } from \"../../configs/env\";\nimport axios from \"axios\";\nimport AuthContext from \"../../context/authContext\";\nimport { IDirectRoom } from \"../../types/directs\";\nimport { ListItemText, ListItem } from \"@mui/material\";\nimport DirectMessages from \"./DirectMessages\";\nimport Direct from \"./Direct\";\nimport { IUser } from \"../../types/postTypes\";\nimport { css } from \"@emotion/css\"\n\nconst DirectWrapper = css`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n`\n\nconst DirectList = () => {\n  const { user } = useContext(AuthContext);\n  const [directs, setDirects] = useState<IDirectRoom[]>([]);\n  const [selected, setSelected] = useState<number>();\n  const [newDirectUser, setNewDirectUser] = useState<string>(\"\");\n\n  useLayoutEffect(() => {\n    axios.get(`${backServer}/directs/withUsers`,\n      {\n        params: {\n          userId1: user._id\n        }\n      }).then(res => {\n        setDirects((res as any).data);\n      });\n  }, [user])\n\n  const renderItems = (direct: IDirectRoom, index: number) => {\n    const friend = direct.members.filter(member => member._id !== user._id)[0];\n    let meIndex = -1;\n    for (let i = 0; i < direct.members.length; i++) {\n      if (direct.members[i]._id === user._id) {\n        meIndex = i;\n      }\n    }\n    const unreads = direct.messages.length - direct.bookmarks[meIndex] - 1;\n\n    return (\n      <ListItem>\n        <ListItemText primary={`${friend.name} ${unreads}개 메시지`} key={index} onClick={onClickDirect(index)} />\n      </ListItem>\n    )\n  }\n\n  const onClickDirect = (index: number) => {\n    return () => {\n      setSelected(index);\n      axios.post(`${backServer}/directs/updateBookmark`, { roomId: directs[index]._id, userId: user._id })\n    }\n  }\n\n  const newDirect = async () => {\n    const opponent = await axios.get(`${backServer}/users/name`,\n      {\n        params: {\n          name: newDirectUser\n        }\n      })\n\n    const users = [user, opponent.data as IUser]\n    const res = await axios.post(`${backServer}/directs/newRoom`, { members: users })\n    const direct = {\n      _id: res.data as string,\n      members: users,\n      messages: [],\n      bookmarks: [0, 0]\n    }\n    setDirects(prev => [...prev, direct])\n  }\n\n  return (\n    <div className={DirectWrapper}>\n      <div>\n        <Box>\n          {directs.map((direct, i) => renderItems(direct, i))}\n        </Box>\n        <input type=\"text\" value={newDirectUser} onChange={(e) => setNewDirectUser(e.target.value)} />\n        <input type=\"button\" onClick={newDirect} value=\"시작\" />\n      </div>\n\n      {selected != null && <Direct users={directs[selected].members} />}\n    </div>\n  )\n}\n\nexport default DirectList;","import React, { useState } from \"react\";\nimport \"./App.css\";\nimport Login from \"./components/Login/Login\";\nimport Mypage from \"./components/Mypage/Mypage\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect\n} from \"react-router-dom\";\nimport TopBar from \"./components/TopBar/TopBar\";\nimport Posts from \"./components/Post/Posts\"\nimport ChangeProfile from \"./components/Mypage/ChangeProfile\";\nimport AuthContext from \"./context/authContext\";\nimport { IUser } from \"./types/postTypes\";\nimport EditPost from \"./components/Post/EditPost\";\nimport DirectList from \"./components/direct/DirectList\";\nimport Post from \"./components/Post/Post\"\nimport { useEffect } from \"react\";\n\nfunction App() {\n  const [isAuthenticated, setIsAuthenticated] = React.useState<boolean>(false);\n  const [user, setUser] = useState<IUser>({ _id: \"\", name: \"\", avatar: \"\", email: \"\" });\n  // const PrivateRoute = ({ children, ...rest }: any) => {\n  //   return (\n  //     <Route\n  //       {...rest}\n  //       render={\n  //         () => {\n  //           isAuthenticated ?\n  //             children :\n  //             <Redirect to=\"/login\" />\n  //         }\n  //       }\n  //     />\n  //   )\n  // }\n\n  return (\n    <AuthContext.Provider value={{ isAuthenticated, setIsAuthenticated, user, setUser }}>\n      <div className=\"App\">\n        {!isAuthenticated && <Login />}\n        {isAuthenticated && <>\n          <TopBar />\n          <div id=\"contentWrapper\">\n            <Switch>\n              <Route exact path=\"/directs\">\n                <DirectList />\n              </Route>\n              <Route exact path=\"/login\">\n                <Login />\n              </Route>\n              <Route exact path=\"/changeProfile\">\n                <ChangeProfile />\n              </Route>\n              <Route exact path=\"/posts/:postId\">\n                <div className=\"posts\">\n                  <Post />\n                </div>\n              </Route>\n              <Route exact path=\"/posts/:postId/edit\">\n                <EditPost />\n              </Route>\n              <Route path=\"/:userNameParam\">\n                <Mypage />\n              </Route>\n              <Route exact path=\"/\">\n                <Posts />\n              </Route>\n\n            </Switch>\n          </div>\n\n        </>}\n      </div>\n    </AuthContext.Provider>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <Router>\n      <App />\n    </Router>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}